(function(L,o){typeof exports=="object"&&typeof module!="undefined"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(L=typeof globalThis!="undefined"?globalThis:L||self,o(L.VNetworkGraph={},L.Vue))})(this,function(L,o){"use strict";var Fd=Object.defineProperty,Wd=Object.defineProperties;var Ud=Object.getOwnPropertyDescriptors;var xr=Object.getOwnPropertySymbols;var Gd=Object.prototype.hasOwnProperty,Xd=Object.prototype.propertyIsEnumerable;var J=Math.pow,Pr=(L,o,q)=>o in L?Fd(L,o,{enumerable:!0,configurable:!0,writable:!0,value:q}):L[o]=q,Y=(L,o)=>{for(var q in o||(o={}))Gd.call(o,q)&&Pr(L,q,o[q]);if(xr)for(var q of xr(o))Xd.call(o,q)&&Pr(L,q,o[q]);return L},rt=(L,o)=>Wd(L,Ud(o));var ue=(L,o,q)=>new Promise((de,Z)=>{var it=fe=>{try{Me(q.next(fe))}catch(Ve){Z(Ve)}},Bt=fe=>{try{Me(q.throw(fe))}catch(Ve){Z(Ve)}},Me=fe=>fe.done?de(fe.value):Promise.resolve(fe.value).then(it,Bt);Me((q=q.apply(L,o)).next())});const q=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function de(e){return o.isReactive(e)?e:o.reactive(e)}function Z(e,t="Parameter"){if(e==null)throw new Error(`${t} is null`);return e}const it=Symbol("containers");function Bt(e){o.provide(it,e)}function Me(){const e=Z(o.inject(it),"containers");return{container:e.container,svg:e.svg,viewport:e.viewport,svgPanZoom:e.svgPanZoom}}var fe=typeof global=="object"&&global&&global.Object===Object&&global,Ve=typeof self=="object"&&self&&self.Object===Object&&self,se=fe||Ve||Function("return this")(),ye=se.Symbol,kn=Object.prototype,Sr=kn.hasOwnProperty,Mr=kn.toString,He=ye?ye.toStringTag:void 0;function Cr(e){var t=Sr.call(e,He),n=e[He];try{e[He]=void 0;var r=!0}catch(s){}var i=Mr.call(e);return r&&(t?e[He]=n:delete e[He]),i}var Tr=Object.prototype,Or=Tr.toString;function Br(e){return Or.call(e)}var zr="[object Null]",Ir="[object Undefined]",xn=ye?ye.toStringTag:void 0;function Ce(e){return e==null?e===void 0?Ir:zr:xn&&xn in Object(e)?Cr(e):Br(e)}function ve(e){return e!=null&&typeof e=="object"}var $r="[object Symbol]";function Pn(e){return typeof e=="symbol"||ve(e)&&Ce(e)==$r}function Ar(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var Te=Array.isArray,Lr=1/0,Sn=ye?ye.prototype:void 0,Mn=Sn?Sn.toString:void 0;function Cn(e){if(typeof e=="string")return e;if(Te(e))return Ar(e,Cn)+"";if(Pn(e))return Mn?Mn.call(e):"";var t=e+"";return t=="0"&&1/e==-Lr?"-0":t}var _r=/\s/;function Nr(e){for(var t=e.length;t--&&_r.test(e.charAt(t)););return t}var jr=/^\s+/;function Dr(e){return e&&e.slice(0,Nr(e)+1).replace(jr,"")}function he(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Tn=NaN,Zr=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,Vr=/^0o[0-7]+$/i,Hr=parseInt;function st(e){if(typeof e=="number")return e;if(Pn(e))return Tn;if(he(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=he(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Dr(e);var n=Rr.test(e);return n||Vr.test(e)?Hr(e.slice(2),n?2:8):Zr.test(e)?Tn:+e}var On=1/0,Fr=17976931348623157e292;function Wr(e){if(!e)return e===0?e:0;if(e=st(e),e===On||e===-On){var t=e<0?-1:1;return t*Fr}return e===e?e:0}function Bn(e){var t=Wr(e),n=t%1;return t===t?n?t-n:t:0}function zn(e){return e}var Ur="[object AsyncFunction]",Gr="[object Function]",Xr="[object GeneratorFunction]",qr="[object Proxy]";function zt(e){if(!he(e))return!1;var t=Ce(e);return t==Gr||t==Xr||t==Ur||t==qr}var It=se["__core-js_shared__"],In=function(){var e=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Kr(e){return!!In&&In in e}var Yr=Function.prototype,Qr=Yr.toString;function Oe(e){if(e!=null){try{return Qr.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var Jr=/[\\^$.*+?()[\]{}|]/g,ei=/^\[object .+?Constructor\]$/,ti=Function.prototype,ni=Object.prototype,oi=ti.toString,ri=ni.hasOwnProperty,ii=RegExp("^"+oi.call(ri).replace(Jr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function si(e){if(!he(e)||Kr(e))return!1;var t=zt(e)?ii:ei;return t.test(Oe(e))}function ai(e,t){return e==null?void 0:e[t]}function Be(e,t){var n=ai(e,t);return si(n)?n:void 0}var $t=Be(se,"WeakMap"),$n=Object.create,li=function(){function e(){}return function(t){if(!he(t))return{};if($n)return $n(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function ci(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function ui(){}function di(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var fi=800,hi=16,pi=Date.now;function gi(e){var t=0,n=0;return function(){var r=pi(),i=hi-(r-n);if(n=r,i>0){if(++t>=fi)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function mi(e){return function(){return e}}var at=function(){try{var e=Be(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),bi=at?function(e,t){return at(e,"toString",{configurable:!0,enumerable:!1,value:mi(t),writable:!0})}:zn,yi=gi(bi);function vi(e,t,n,r){for(var i=e.length,s=n+-1;++s<i;)if(t(e[s],s,e))return s;return-1}function wi(e){return e!==e}function Ei(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function ki(e,t,n){return t===t?Ei(e,t,n):vi(e,wi,n)}function xi(e,t){var n=e==null?0:e.length;return!!n&&ki(e,t,0)>-1}var Pi=9007199254740991,Si=/^(?:0|[1-9]\d*)$/;function An(e,t){var n=typeof e;return t=t==null?Pi:t,!!t&&(n=="number"||n!="symbol"&&Si.test(e))&&e>-1&&e%1==0&&e<t}function At(e,t,n){t=="__proto__"&&at?at(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Fe(e,t){return e===t||e!==e&&t!==t}var Mi=Object.prototype,Ci=Mi.hasOwnProperty;function Ti(e,t,n){var r=e[t];(!(Ci.call(e,t)&&Fe(r,n))||n===void 0&&!(t in e))&&At(e,t,n)}function Oi(e,t,n,r){var i=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var l=t[s],c=void 0;c===void 0&&(c=e[l]),i?At(n,l,c):Ti(n,l,c)}return n}var Ln=Math.max;function Bi(e,t,n){return t=Ln(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=Ln(r.length-t,0),a=Array(s);++i<s;)a[i]=r[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=r[i];return l[t]=n(a),ci(e,this,l)}}function zi(e,t){return yi(Bi(e,t,zn),e+"")}var Ii=9007199254740991;function _n(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ii}function lt(e){return e!=null&&_n(e.length)&&!zt(e)}function $i(e,t,n){if(!he(n))return!1;var r=typeof t;return(r=="number"?lt(n)&&An(t,n.length):r=="string"&&t in n)?Fe(n[t],e):!1}function Nn(e){return zi(function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(i--,s):void 0,a&&$i(n[0],n[1],a)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var l=n[r];l&&e(t,l,r,s)}return t})}var Ai=Object.prototype;function Lt(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Ai;return e===n}function Li(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var _i="[object Arguments]";function jn(e){return ve(e)&&Ce(e)==_i}var Dn=Object.prototype,Ni=Dn.hasOwnProperty,ji=Dn.propertyIsEnumerable,_t=jn(function(){return arguments}())?jn:function(e){return ve(e)&&Ni.call(e,"callee")&&!ji.call(e,"callee")};function Di(){return!1}var Zn=typeof L=="object"&&L&&!L.nodeType&&L,Rn=Zn&&typeof module=="object"&&module&&!module.nodeType&&module,Zi=Rn&&Rn.exports===Zn,Vn=Zi?se.Buffer:void 0,Ri=Vn?Vn.isBuffer:void 0,ct=Ri||Di,Vi="[object Arguments]",Hi="[object Array]",Fi="[object Boolean]",Wi="[object Date]",Ui="[object Error]",Gi="[object Function]",Xi="[object Map]",qi="[object Number]",Ki="[object Object]",Yi="[object RegExp]",Qi="[object Set]",Ji="[object String]",es="[object WeakMap]",ts="[object ArrayBuffer]",ns="[object DataView]",os="[object Float32Array]",rs="[object Float64Array]",is="[object Int8Array]",ss="[object Int16Array]",as="[object Int32Array]",ls="[object Uint8Array]",cs="[object Uint8ClampedArray]",us="[object Uint16Array]",ds="[object Uint32Array]",H={};H[os]=H[rs]=H[is]=H[ss]=H[as]=H[ls]=H[cs]=H[us]=H[ds]=!0,H[Vi]=H[Hi]=H[ts]=H[Fi]=H[ns]=H[Wi]=H[Ui]=H[Gi]=H[Xi]=H[qi]=H[Ki]=H[Yi]=H[Qi]=H[Ji]=H[es]=!1;function fs(e){return ve(e)&&_n(e.length)&&!!H[Ce(e)]}function hs(e){return function(t){return e(t)}}var Hn=typeof L=="object"&&L&&!L.nodeType&&L,We=Hn&&typeof module=="object"&&module&&!module.nodeType&&module,ps=We&&We.exports===Hn,Nt=ps&&fe.process,Fn=function(){try{var e=We&&We.require&&We.require("util").types;return e||Nt&&Nt.binding&&Nt.binding("util")}catch(t){}}(),Wn=Fn&&Fn.isTypedArray,jt=Wn?hs(Wn):fs,gs=Object.prototype,ms=gs.hasOwnProperty;function Un(e,t){var n=Te(e),r=!n&&_t(e),i=!n&&!r&&ct(e),s=!n&&!r&&!i&&jt(e),a=n||r||i||s,l=a?Li(e.length,String):[],c=l.length;for(var d in e)(t||ms.call(e,d))&&!(a&&(d=="length"||i&&(d=="offset"||d=="parent")||s&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||An(d,c)))&&l.push(d);return l}function Gn(e,t){return function(n){return e(t(n))}}var bs=Gn(Object.keys,Object),ys=Object.prototype,vs=ys.hasOwnProperty;function ws(e){if(!Lt(e))return bs(e);var t=[];for(var n in Object(e))vs.call(e,n)&&n!="constructor"&&t.push(n);return t}function Es(e){return lt(e)?Un(e):ws(e)}function ks(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var xs=Object.prototype,Ps=xs.hasOwnProperty;function Ss(e){if(!he(e))return ks(e);var t=Lt(e),n=[];for(var r in e)r=="constructor"&&(t||!Ps.call(e,r))||n.push(r);return n}function Xn(e){return lt(e)?Un(e,!0):Ss(e)}var Ue=Be(Object,"create");function Ms(){this.__data__=Ue?Ue(null):{},this.size=0}function Cs(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ts="__lodash_hash_undefined__",Os=Object.prototype,Bs=Os.hasOwnProperty;function zs(e){var t=this.__data__;if(Ue){var n=t[e];return n===Ts?void 0:n}return Bs.call(t,e)?t[e]:void 0}var Is=Object.prototype,$s=Is.hasOwnProperty;function As(e){var t=this.__data__;return Ue?t[e]!==void 0:$s.call(t,e)}var Ls="__lodash_hash_undefined__";function _s(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ue&&t===void 0?Ls:t,this}function ze(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ze.prototype.clear=Ms,ze.prototype.delete=Cs,ze.prototype.get=zs,ze.prototype.has=As,ze.prototype.set=_s;function Ns(){this.__data__=[],this.size=0}function ut(e,t){for(var n=e.length;n--;)if(Fe(e[n][0],t))return n;return-1}var js=Array.prototype,Ds=js.splice;function Zs(e){var t=this.__data__,n=ut(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ds.call(t,n,1),--this.size,!0}function Rs(e){var t=this.__data__,n=ut(t,e);return n<0?void 0:t[n][1]}function Vs(e){return ut(this.__data__,e)>-1}function Hs(e,t){var n=this.__data__,r=ut(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ge(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ge.prototype.clear=Ns,ge.prototype.delete=Zs,ge.prototype.get=Rs,ge.prototype.has=Vs,ge.prototype.set=Hs;var Ge=Be(se,"Map");function Fs(){this.size=0,this.__data__={hash:new ze,map:new(Ge||ge),string:new ze}}function Ws(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function dt(e,t){var n=e.__data__;return Ws(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Us(e){var t=dt(this,e).delete(e);return this.size-=t?1:0,t}function Gs(e){return dt(this,e).get(e)}function Xs(e){return dt(this,e).has(e)}function qs(e,t){var n=dt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Ie(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ie.prototype.clear=Fs,Ie.prototype.delete=Us,Ie.prototype.get=Gs,Ie.prototype.has=Xs,Ie.prototype.set=qs;function qn(e){return e==null?"":Cn(e)}function Ks(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var Kn=Gn(Object.getPrototypeOf,Object),Ys="[object Object]",Qs=Function.prototype,Js=Object.prototype,Yn=Qs.toString,ea=Js.hasOwnProperty,ta=Yn.call(Object);function Qn(e){if(!ve(e)||Ce(e)!=Ys)return!1;var t=Kn(e);if(t===null)return!0;var n=ea.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Yn.call(n)==ta}function na(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s}var oa=se.isFinite,ra=Math.min;function ia(e){var t=Math[e];return function(n,r){if(n=st(n),r=r==null?0:ra(Bn(r),292),r&&oa(n)){var i=(qn(n)+"e").split("e"),s=t(i[0]+"e"+(+i[1]+r));return i=(qn(s)+"e").split("e"),+(i[0]+"e"+(+i[1]-r))}return t(n)}}var sa=Math.ceil,aa=Math.max;function Dt(e,t,n){t===void 0?t=1:t=aa(Bn(t),0);var r=e==null?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,a=Array(sa(r/t));i<r;)a[s++]=na(e,i,i+=t);return a}function la(){this.__data__=new ge,this.size=0}function ca(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function ua(e){return this.__data__.get(e)}function da(e){return this.__data__.has(e)}var fa=200;function ha(e,t){var n=this.__data__;if(n instanceof ge){var r=n.__data__;if(!Ge||r.length<fa-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Ie(r)}return n.set(e,t),this.size=n.size,this}function me(e){var t=this.__data__=new ge(e);this.size=t.size}me.prototype.clear=la,me.prototype.delete=ca,me.prototype.get=ua,me.prototype.has=da,me.prototype.set=ha;var Jn=typeof L=="object"&&L&&!L.nodeType&&L,eo=Jn&&typeof module=="object"&&module&&!module.nodeType&&module,pa=eo&&eo.exports===Jn,to=pa?se.Buffer:void 0;to&&to.allocUnsafe;function ga(e,t){return e.slice()}function ma(e,t){for(var n=-1,r=e==null?0:e.length,i=0,s=[];++n<r;){var a=e[n];t(a,n,e)&&(s[i++]=a)}return s}function ba(){return[]}var ya=Object.prototype,va=ya.propertyIsEnumerable,no=Object.getOwnPropertySymbols,wa=no?function(e){return e==null?[]:(e=Object(e),ma(no(e),function(t){return va.call(e,t)}))}:ba;function Ea(e,t,n){var r=t(e);return Te(e)?r:Ks(r,n(e))}function oo(e){return Ea(e,Es,wa)}var Zt=Be(se,"DataView"),Rt=Be(se,"Promise"),_e=Be(se,"Set"),ro="[object Map]",ka="[object Object]",io="[object Promise]",so="[object Set]",ao="[object WeakMap]",lo="[object DataView]",xa=Oe(Zt),Pa=Oe(Ge),Sa=Oe(Rt),Ma=Oe(_e),Ca=Oe($t),we=Ce;(Zt&&we(new Zt(new ArrayBuffer(1)))!=lo||Ge&&we(new Ge)!=ro||Rt&&we(Rt.resolve())!=io||_e&&we(new _e)!=so||$t&&we(new $t)!=ao)&&(we=function(e){var t=Ce(e),n=t==ka?e.constructor:void 0,r=n?Oe(n):"";if(r)switch(r){case xa:return lo;case Pa:return ro;case Sa:return io;case Ma:return so;case Ca:return ao}return t});var ft=se.Uint8Array;function Ta(e){var t=new e.constructor(e.byteLength);return new ft(t).set(new ft(e)),t}function Oa(e,t){var n=Ta(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function Ba(e){return typeof e.constructor=="function"&&!Lt(e)?li(Kn(e)):{}}var za="__lodash_hash_undefined__";function Ia(e){return this.__data__.set(e,za),this}function $a(e){return this.__data__.has(e)}function Xe(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Ie;++t<n;)this.add(e[t])}Xe.prototype.add=Xe.prototype.push=Ia,Xe.prototype.has=$a;function Aa(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function co(e,t){return e.has(t)}var La=1,_a=2;function uo(e,t,n,r,i,s){var a=n&La,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,g=n&_a?new Xe:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var E=e[f],k=t[f];if(r)var w=a?r(k,E,f,t,e,s):r(E,k,f,e,t,s);if(w!==void 0){if(w)continue;h=!1;break}if(g){if(!Aa(t,function(m,v){if(!co(g,v)&&(E===m||i(E,m,n,r,s)))return g.push(v)})){h=!1;break}}else if(!(E===k||i(E,k,n,r,s))){h=!1;break}}return s.delete(e),s.delete(t),h}function Na(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function Vt(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var ja=1,Da=2,Za="[object Boolean]",Ra="[object Date]",Va="[object Error]",Ha="[object Map]",Fa="[object Number]",Wa="[object RegExp]",Ua="[object Set]",Ga="[object String]",Xa="[object Symbol]",qa="[object ArrayBuffer]",Ka="[object DataView]",fo=ye?ye.prototype:void 0,Ht=fo?fo.valueOf:void 0;function Ya(e,t,n,r,i,s,a){switch(n){case Ka:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case qa:return!(e.byteLength!=t.byteLength||!s(new ft(e),new ft(t)));case Za:case Ra:case Fa:return Fe(+e,+t);case Va:return e.name==t.name&&e.message==t.message;case Wa:case Ga:return e==t+"";case Ha:var l=Na;case Ua:var c=r&ja;if(l||(l=Vt),e.size!=t.size&&!c)return!1;var d=a.get(e);if(d)return d==t;r|=Da,a.set(e,t);var u=uo(l(e),l(t),r,i,s,a);return a.delete(e),u;case Xa:if(Ht)return Ht.call(e)==Ht.call(t)}return!1}var Qa=1,Ja=Object.prototype,el=Ja.hasOwnProperty;function tl(e,t,n,r,i,s){var a=n&Qa,l=oo(e),c=l.length,d=oo(t),u=d.length;if(c!=u&&!a)return!1;for(var f=c;f--;){var h=l[f];if(!(a?h in t:el.call(t,h)))return!1}var g=s.get(e),E=s.get(t);if(g&&E)return g==t&&E==e;var k=!0;s.set(e,t),s.set(t,e);for(var w=a;++f<c;){h=l[f];var m=e[h],v=t[h];if(r)var x=a?r(v,m,h,t,e,s):r(m,v,h,e,t,s);if(!(x===void 0?m===v||i(m,v,n,r,s):x)){k=!1;break}w||(w=h=="constructor")}if(k&&!w){var y=e.constructor,p=t.constructor;y!=p&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof p=="function"&&p instanceof p)&&(k=!1)}return s.delete(e),s.delete(t),k}var nl=1,ho="[object Arguments]",po="[object Array]",ht="[object Object]",ol=Object.prototype,go=ol.hasOwnProperty;function rl(e,t,n,r,i,s){var a=Te(e),l=Te(t),c=a?po:we(e),d=l?po:we(t);c=c==ho?ht:c,d=d==ho?ht:d;var u=c==ht,f=d==ht,h=c==d;if(h&&ct(e)){if(!ct(t))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new me),a||jt(e)?uo(e,t,n,r,i,s):Ya(e,t,c,n,r,i,s);if(!(n&nl)){var g=u&&go.call(e,"__wrapped__"),E=f&&go.call(t,"__wrapped__");if(g||E){var k=g?e.value():e,w=E?t.value():t;return s||(s=new me),i(k,w,n,r,s)}}return h?(s||(s=new me),tl(e,t,n,r,i,s)):!1}function mo(e,t,n,r,i){return e===t?!0:e==null||t==null||!ve(e)&&!ve(t)?e!==e&&t!==t:rl(e,t,n,r,mo,i)}function il(e){return function(t,n,r){for(var i=-1,s=Object(t),a=r(t),l=a.length;l--;){var c=a[++i];if(n(s[c],c,s)===!1)break}return t}}var sl=il(),Ft=function(){return se.Date.now()},al="Expected a function",ll=Math.max,cl=Math.min;function ul(e,t,n){var r,i,s,a,l,c,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(al);t=st(t)||0,he(n)&&(u=!!n.leading,f="maxWait"in n,s=f?ll(st(n.maxWait)||0,t):s,h="trailing"in n?!!n.trailing:h);function g(b){var S=r,M=i;return r=i=void 0,d=b,a=e.apply(M,S),a}function E(b){return d=b,l=setTimeout(m,t),u?g(b):a}function k(b){var S=b-c,M=b-d,O=t-S;return f?cl(O,s-M):O}function w(b){var S=b-c,M=b-d;return c===void 0||S>=t||S<0||f&&M>=s}function m(){var b=Ft();if(w(b))return v(b);l=setTimeout(m,k(b))}function v(b){return l=void 0,h&&r?g(b):(r=i=void 0,a)}function x(){l!==void 0&&clearTimeout(l),d=0,r=c=i=l=void 0}function y(){return l===void 0?a:v(Ft())}function p(){var b=Ft(),S=w(b);if(r=arguments,i=this,c=b,S){if(l===void 0)return E(c);if(f)return clearTimeout(l),l=setTimeout(m,t),g(c)}return l===void 0&&(l=setTimeout(m,t)),a}return p.cancel=x,p.flush=y,p}function Wt(e,t,n){(n!==void 0&&!Fe(e[t],n)||n===void 0&&!(t in e))&&At(e,t,n)}function dl(e){return ve(e)&&lt(e)}function Ut(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function fl(e){return Oi(e,Xn(e))}function hl(e,t,n,r,i,s,a){var l=Ut(e,n),c=Ut(t,n),d=a.get(c);if(d){Wt(e,n,d);return}var u=s?s(l,c,n+"",e,t,a):void 0,f=u===void 0;if(f){var h=Te(c),g=!h&&ct(c),E=!h&&!g&&jt(c);u=c,h||g||E?Te(l)?u=l:dl(l)?u=di(l):g?(f=!1,u=ga(c)):E?(f=!1,u=Oa(c)):u=[]:Qn(c)||_t(c)?(u=l,_t(l)?u=fl(l):(!he(l)||zt(l))&&(u=Ba(c))):f=!1}f&&(a.set(c,u),i(u,c,r,s,a),a.delete(c)),Wt(e,n,u)}function Gt(e,t,n,r,i){e!==t&&sl(t,function(s,a){if(i||(i=new me),he(s))hl(e,t,a,n,Gt,r,i);else{var l=r?r(Ut(e,a),s,a+"",e,t,i):void 0;l===void 0&&(l=s),Wt(e,a,l)}},Xn)}var pl=Nn(function(e,t,n,r){Gt(e,t,n,r)});function Ee(e,t){return mo(e,t)}var bo=Nn(function(e,t,n){Gt(e,t,n)}),yo=ia("round"),gl=1/0,ml=_e&&1/Vt(new _e([,-0]))[1]==gl?function(e){return new _e(e)}:ui,bl=200;function yl(e,t,n){var r=-1,i=xi,s=e.length,a=!0,l=[],c=l;if(s>=bl){var d=ml(e);if(d)return Vt(d);a=!1,i=co,c=new Xe}else c=l;e:for(;++r<s;){var u=e[r],f=u;if(u=u!==0?u:0,a&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;l.push(u)}else i(c,f,n)||(c!==l&&c.push(f),l.push(u))}return l}function vl(e){return e&&e.length?yl(e):[]}class B{static value(t,n){return t instanceof Function?t(n):t}static values(t,n){return Object.values(t).filter(r=>r instanceof Function).length===0?t:Object.fromEntries(Object.entries(t).map(([r,i])=>[r,i instanceof Function?i(n):i]))}}var $=(e=>(e.CENTER="center",e.NORTH="north",e.NORTH_EAST="north-east",e.EAST="east",e.SOUTH_EAST="south-east",e.SOUTH="south",e.SOUTH_WEST="south-west",e.WEST="west",e.NORTH_WEST="north-west",e))($||{});function pt(e){const t={};return Object.assign(t,e(t))}function wl(e){return e}function El(e){return e}function vo(e,t,n){const r=B.values(t.normal,e);return r.type=="circle"?{width:r.radius*2*n,height:r.radius*2*n}:{width:r.width*n,height:r.height*n}}function kl(e,t,n,r){const s=Math.abs(e.x-n.x)<t.width/2+r.width/2,l=Math.abs(e.y-n.y)<t.height/2+r.height/2;return s&&l}function qe(e,t){let n=0;return t===1||e===void 0||e==="none"?n=e!=null?e:0:typeof e=="string"?n=e.split(/\s+/).map(r=>parseInt(r)*t).filter(r=>!isNaN(r)).join(" "):n=e*t,n&&n!=="0"?n:void 0}function gt(e){let t=0;if(e===void 0||e==="none")t=0;else if(typeof e=="string"){const n=e.split(/\s+/).map(r=>parseInt(r)).filter(r=>!isNaN(r));n.length%2===0?t=n.reduce((r,i)=>r+i,0):t=n.reduce((r,i)=>r+i,0)*2}else t=e*2;return t}const wo=20;class Xt{activate(t){const{nodePositions:n,nodes:r,configs:i,emitter:s,scale:a,svgPanZoom:l}=t,c=f=>{for(const[h,g]of Object.entries(f)){const E=this.getOrCreateNodePosition(n,h);this.setNodePosition(E,g)}},d=f=>{const h=f.filter(k=>!(k in n.value)),g=l.getViewArea(),E=a.value;for(const k of h){const w=r.value[k],m=vo(w,i.node,E),v=Y({},g.center);for(;;){let y=!1;for(const[p,b]of Object.entries(n.value)){if(k===p)continue;const S=r.value[p];if(!S)continue;const M=vo(S,i.node,E);if(y=kl(v,m,b,M),y)break}if(y)v.x+=m.width+wo*E,v.x+m.width/2>g.box.right&&(v.x=g.center.x,v.y+=m.height+wo*E);else break}const x=this.getOrCreateNodePosition(n,k);this.setNodePosition(x,v)}};d(Object.keys(r.value));const u=o.watch(()=>Ee(new Set(Object.keys(r.value)),new Set(Object.keys(n.value))),f=>{f||d(Object.keys(r.value))});s.on("node:dragstart",c),s.on("node:pointermove",c),s.on("node:dragend",c),this.onDeactivate=()=>{u(),s.off("node:dragstart",c),s.off("node:pointermove",c),s.off("node:dragend",c)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(t,n){t.value.x=yo(n.x,3),t.value.y=yo(n.y,3)}getOrCreateNodePosition(t,n){const r=o.toRef(t.value,n);return r.value||(r.value={x:0,y:0}),r}}function Eo(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",fitContentMargin:"8%",autoPanOnResize:!0,layoutHandler:new Xt,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:e=>{const t=/Mac OS/.test(navigator.userAgent)?e.metaKey:e.ctrlKey;return e.type==="keydown"?t:!t}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:pt(e=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:t=>B.value(e.normal.type,t),radius:t=>{var n;return((n=B.value(e.normal.radius,t))!=null?n:0)+2},width:t=>{var n;return((n=B.value(e.normal.width,t))!=null?n:0)+2},height:t=>{var n;return((n=B.value(e.normal.height,t))!=null?n:0)+2},borderRadius:t=>{var n;return(n=B.value(e.normal.borderRadius,t))!=null?n:0},strokeWidth:t=>B.value(e.normal.strokeWidth,t),strokeColor:t=>B.value(e.normal.strokeColor,t),strokeDasharray:t=>B.value(e.normal.strokeDasharray,t),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:$.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:pt(e=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:t=>B.value(e.normal.width,t)+1,color:"#3355bb",dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+1,color:"#dd8800",dasharray:t=>{const n=B.value(e.normal.width,t);return`${n*1.5} ${n*2}`},linecap:t=>B.value(e.normal.linecap,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(t,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:pt(e=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:o.reactive({width:6,color:t=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],r=t.edges.map(i=>i.split("").reduce((s,a)=>(s=(s<<5)-s+a.charCodeAt(0),s&s),0)).reduce((i,s)=>i+s,0);return n[Math.abs(r)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:t=>B.value(e.path.width,t),color:t=>B.value(e.path.color,t),dasharray:t=>B.value(e.path.dasharray,t),linecap:t=>B.value(e.path.linecap,t),linejoin:t=>B.value(e.path.linejoin,t),animate:t=>B.value(e.path.animate,t),animationSpeed:t=>B.value(e.path.animationSpeed,t)},hover:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:t=>B.value(e.normal.dasharray,t),linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selected:{width:t=>B.value(e.normal.width,t)+2,color:t=>B.value(e.normal.color,t),dasharray:"6 12",linecap:t=>B.value(e.normal.linecap,t),linejoin:t=>B.value(e.normal.linejoin,t),animate:t=>B.value(e.normal.animate,t),animationSpeed:t=>B.value(e.normal.animationSpeed,t)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}function xl(e){const t=Eo();return e&&bo(t,e),t}const ko=Symbol("style");function Pl(e,t){return Qn(e)?bo(e,t):t}function Sl(e){const t=o.reactive(Eo()),n=Object.keys(t);for(const r of n)o.watch(()=>e.value[r],()=>{pl(t[r],e.value[r]||{},Pl)},{immediate:!0,deep:!0});return o.provide(ko,t),t}function mt(e){return Z(o.inject(ko),`Configs(${e})`)[e]}function Ml(){return mt("view")}function bt(){return mt("node")}function yt(){return mt("edge")}function xo(){return mt("path")}let Cl=1;function Tl(){return Cl++}function ee(e){return Object.entries(e)}function vt(e,t){const n=new Set(Object.keys(e));ee(t).forEach(([r,i])=>{Ee(e[r],i)||(e[r]=i),n.delete(r)}),n.forEach(r=>delete e[r])}function Ol(e){return e instanceof Promise||e&&typeof e.then=="function"}function Bl(e,t,n){const r=de({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return o.watchEffect(()=>{const{edgeLayoutPoints:i,edgeGroups:s}=Il(n,e.value,t.value);vt(r.edgeLayoutPoints,i),vt(r.edgeGroups,s)}),o.watchEffect(()=>{const i={};for(const[s,{edges:a,groupWidth:l}]of Object.entries(r.edgeGroups)){let c=!1;if(l==0)c=!1;else if(n.edge.summarize instanceof Function){const d=n.edge.summarize(a,n);d===null?c=Po(e.value,a,n,l):c=d}else n.edge.summarize?c=Po(e.value,a,n,l):c=!1;r.edgeGroups[s].summarize=c,c&&Object.keys(a).forEach(d=>i[d]=!0)}vt(r.summarizedEdges,i)}),r}function zl(e,t,n,r,i,s){return e?t?So(e.edge,n,r,i,0,0,s):So(e.edge,n,r,i,e.groupWidth,e.pointInGroup,s):{p1:{x:0,y:0},p2:{x:0,y:0}}}function Il(e,t,n){const r={},i={},s={};for(const[l,c]of Object.entries(n)){if(!(c.source in t&&c.target in t))continue;const d=[c.source,c.target].sort().join("<=>"),u=s[d]||{};u[l]=c,s[d]=u}const a=e.edge.gap instanceof Function?e.edge.gap:(l,c)=>e.edge.gap;for(const[l,c]of Object.entries(s)){const d=Object.keys(c).length;if(d==0)continue;const u=a(c,e),[f,h]=Object.entries(c)[0];if(d===1)r[f]={edge:h,pointInGroup:0,groupWidth:0},i[l]={edges:c,groupWidth:0,summarize:!1};else{let g=0;const E=Object.entries(c).map(([m,v])=>{let x=B.value(e.edge.normal.width,v);return isNaN(+x)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",m,x),x=1),x/2}),k=Object.entries(c).map(([m,v],x)=>(x>0&&(g+=E[x-1]+u+E[x]),[m,v,g])),w=g;k.forEach(([m,v,x])=>{r[m]={edge:v,pointInGroup:x,groupWidth:w}}),i[l]={edges:c,groupWidth:w,summarize:!1}}}return{edgeLayoutPoints:r,edgeGroups:i}}function Po(e,t,n,r){if(Object.entries(t).length===1)return!1;const s=Math.min(...Object.values(t).flatMap(a=>[e[a.source],e[a.target]]).filter(a=>a).map(a=>{const l=B.values(n.node.normal,a);return l.type==="circle"?l.radius*2:Math.min(l.width,l.height)}));return r>s}function So(e,t,n,r,i,s,a){var f,h,g,E,k,w,m,v;let l,c,d,u;return e.source<e.target?[l,c,d,u]=Mo((f=t==null?void 0:t.x)!=null?f:0,(h=t==null?void 0:t.y)!=null?h:0,(g=n==null?void 0:n.x)!=null?g:0,(E=n==null?void 0:n.y)!=null?E:0,r,i,s,a):[d,u,l,c]=Mo((k=n==null?void 0:n.x)!=null?k:0,(w=n==null?void 0:n.y)!=null?w:0,(m=t==null?void 0:t.x)!=null?m:0,(v=t==null?void 0:t.y)!=null?v:0,r,i,s,a),{p1:{x:l,y:c},p2:{x:d,y:u}}}function Mo(e,t,n,r,i,s,a,l){const c=n-e,d=r-t;let u=(s/2-a)*i;if(u!==0&&l!=="clock"){const f=Math.atan2(r-t,n-e);if(l==="vertical"){const h=Math.PI/2;(f<-h||f>=h)&&(u*=-1)}else l==="horizontal"&&f<0&&(u*=-1)}if(c===0){const f=d<0?-1:1;return[e+u*f,t,n+u*f,r]}else if(d===0){const f=c<0?1:-1;return[e,t+u*f,n,r+u*f]}else{const h=-1/(d/c);d<0&&(u=-u);const g=u/Math.sqrt(1+Math.pow(h,2));return[e+g,t+g*h,n+g,r+g*h]}}function Co(e,t,n){return n||(n={x:0,y:0}),n.x=e.x+t.x,n.y=e.y+t.y,n}function qt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x-t.x,n.y=e.y-t.y,n}function To(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t.x,n.y=e.y*t.y,n}function Oo(e,t,n){return n||(n={x:0,y:0}),n.x=e.x*t,n.y=e.y*t,n}function Kt(e,t,n){return n||(n={x:0,y:0}),n.x=e.x/t.x,n.y=e.y/t.y,n}function Bo(e,t){return e.x*t.x+e.y*t.y}function zo(e,t){return e.x*t.y-e.y*t.x}function Yt(e){return e.x*e.x+e.y*e.y}function Qt(e){return Math.sqrt(Yt(e))}function Jt(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Io(e,t){return Math.sqrt(Jt(e,t))}function $o(e,t){t||(t={x:0,y:0});const n=Qt(e);return n===0?(t.x=1,t.y=0):Kt(e,{x:n,y:n},t),t}function wt(e,t,n){n||(n={x:0,y:0});const r=e.x*Math.cos(t)-e.y*Math.sin(t),i=e.x*Math.sin(t)+e.y*Math.cos(t);return n.x=r,n.y=i,n}const $l=180/Math.PI;function Al(e){return e*$l}function en(e){return Math.atan2(e.y,e.x)}function tn(e){return Al(en(e))}const Ll=Object.freeze(Object.defineProperty({__proto__:null,add:Co,angle:en,angleDegree:tn,cross:zo,distance:Io,distanceSquared:Jt,divide:Kt,dot:Bo,length:Qt,lengthSquared:Yt,multiply:To,multiplyScalar:Oo,normalize:$o,rotate:wt,subtract:qt},Symbol.toStringTag,{value:"Module"}));class j{static fromArray(t){return new j(t[0]||0,t[1]||0)}static fromObject(t){return new j(t.x,t.y)}constructor(t,n){this.x=t,this.y=n}add(t){return Co(this,t,this)}subtract(t){return qt(this,t,this)}multiply(t){return To(this,t,this)}multiplyScalar(t){return Oo(this,t,this)}divide(t){return Kt(this,t,this)}dot(t){return Bo(this,t)}cross(t){return zo(this,t)}lengthSquared(){return Yt(this)}length(){return Qt(this)}distanceSquared(t){return Jt(this,t)}distance(t){return Io(this,t)}normalize(){return $o(this,this)}angle(){return en(this)}angleDegree(){return tn(this)}rotate(t){return wt(this,t,this)}isEqualTo(t){return this.x===t.x&&this.y===t.y}clone(){return new j(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const U=Y({Vector2D:j},Ll);class F{constructor(t,n,r){this.source=t,this.target=n,this.v=r}static fromLinePosition(t){const n=j.fromObject(t.p1),r=j.fromObject(t.p2);return new F(n,r,Ne(n,r))}static fromPositions(t,n){const r=j.fromObject(t),i=j.fromObject(n);return new F(r,i,Ne(r,i))}static fromVectors(t,n){return new F(t,n,Ne(t,n))}}function Ne(e,t){return t.clone().subtract(e)}function _l(e){return[j.fromObject(e.p1),j.fromObject(e.p2)]}function Nl(e){return new j((e.p1.x+e.p2.x)/2,(e.p1.y+e.p2.y)/2)}function Et(e,t){return{p1:e,p2:t}}function nn(e,t,n){const r=F.fromLinePosition(e);return jl(r,t,n)}function jl(e,t,n){const r=e.v.clone().normalize(),i=e.source.clone().add(r.clone().multiplyScalar(t)),s=e.target.clone().subtract(r.clone().multiplyScalar(n));let a=i.toObject(),l=s.toObject();const c=Ne(i,s);if(e.v.angle()*c.angle()<0){const d=new j((a.x+l.x)/2,(a.y+l.y)/2),u=d.clone().add(r.multiplyScalar(.5));a=d.toObject(),l=u.toObject()}return{p1:a,p2:l}}function Dl(e){return{p1:e.p2,p2:e.p1}}function Ke(e){const t=e.v.clone().normalize().rotate(Math.PI/2);return F.fromVectors(e.target,e.target.clone().add(t))}function on(e,t){const n=t.v.clone().normalize(),r=t.source,i=U.subtract(e,r),s=n.dot(i);return r.clone().add(n.multiplyScalar(s))}function kt(e,t,n,r){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const a=F.fromVectors(e,t),l=on(n,a),c=U.length(U.subtract(l,n));if(r<c)return null;if(r===c)return l;const d=Math.sqrt(J(r,2)-J(c,2)),u=a.v.normalize().multiplyScalar(d);return l.subtract(u)}function Zl(e,t,n,r,i){if(!(U.lengthSquared(U.subtract(t,n))-r*r<=Math.pow(1,-10)))return null;const l=F.fromVectors(e,t),c=on(n,l),d=U.length(U.subtract(c,n));if(r<d)return null;if(r===d)return c;const u=Math.sqrt(J(r,2)-J(d,2)),f=l.v.normalize().multiplyScalar(u),h=c.clone().add(f),g=c.clone().subtract(f),E=i.distance(h),k=i.distance(g);return Math.abs(E-k)<2?g:E<k?h:g}function $e(e,t){const n=U.subtract(t.source,e.source),r=e.v,i=t.v,s=U.cross(n,r)/U.cross(r,i);return t.source.clone().add(i.clone().multiplyScalar(s))}function Ye(e,t,n,r,i){const s=e,l=n.clone().subtract(s),c=l.length(),d=t+r;if(d<c)return null;const u=Math.abs(t-r);if(c<u)return null;if(c===d){const b=l.clone().normalize(),S=e.clone().add(b.multiplyScalar(t));return i?S:[S,S]}if(c===u){const b=l.clone().normalize(),S=t>r,M=e.clone().add(b.multiplyScalar(S?t:-t));return i?M:[M,M]}const f=t,h=r,g=(J(c,2)+J(f,2)-J(h,2))/(2*c*f),E=f*g,k=Math.sqrt(J(f,2)-J(E,2)),w=l.clone().normalize(),m=new j(-w.y,w.x),v=w.clone().multiplyScalar(E),x=m.clone().multiplyScalar(k),y=e.clone().add(v).add(x),p=e.clone().add(v).subtract(x);if(i){const b=y.distance(i),S=p.distance(i);return b<S?y:p}else return[y,p]}function Ao(e,t,n,r){const i=F.fromPositions(e,t),s=(n.width+n.strokeWidth)/2*r,a=(n.height+n.strokeWidth)/2*r,l=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*r:0,c=(i.v.angle()-Math.PI/2)%Math.PI,d=Math.PI/2-c%Math.PI,u=a*Math.abs(Math.tan(c)),f=s*Math.abs(Math.tan(d)),h=u<=s-l,g=f<=a-l;if(h||g||l===0)return Math.sqrt(h?J(a,2)+J(u,2):J(s,2)+J(f,2));{const E=t.x-s+l,k=t.y-a+l,w=t.x+s-l,m=t.y+a-l,v=[new j(E,k),new j(w,k),new j(w,m),new j(E,m)],x=Math.floor((i.v.angleDegree()+360)%360/90),y=v[x],p=kt(i.source,on(y,i),y,l);return p?Ne(p,i.target).length():Ne(y,i.target).length()+l}}function Lo(e,t,n,r,i){const s=F.fromLinePosition(e),a=s.v.clone().normalize(),l=r===0?s.source:s.source.clone().add(a.clone().multiplyScalar(r*i)),c=r===0?s.target:s.target.clone().subtract(a.clone().multiplyScalar(r*i)),d=(t.width/2+n)*i,u=new j(-a.y,a.x).multiplyScalar(d);let f=U.subtract(l,u),h=U.add(l,u),g=U.subtract(c,u),E=U.add(c,u);const k=s.v.angleDegree();return(k<-90||k>=90)&&([f,h]=[h,f],[g,E]=[E,g]),{source:{above:f,below:h},target:{above:g,below:E}}}function Rl(e,t,n,r){let i;n.type==="circle"?i=n.radius+n.strokeWidth/2:i=Ao(t,e,n,1);let s;return r.type==="circle"?s=r.radius+r.strokeWidth/2:s=Ao(e,t,r,1),[i,s]}function ke(e,t,n){const{x:r,y:i}=e,s=r-t.x,a=i-t.y;return{x:s*Math.cos(n)-a*Math.sin(n)+t.x,y:s*Math.sin(n)+a*Math.cos(n)+t.y}}function rn(e){return e>0?-(Math.PI*2-e):Math.PI*2+e}function sn(e,t,n,r){const i=[],s=F.fromVectors(t,e),a=F.fromVectors(t,n);let l=je(s,a);r*l<0&&(l=rn(l));const c=j.fromObject(ke(e,t,-l/2)),d=F.fromVectors(t,c),u=Ke(d),f=je(s,d);let h=Ke(s);if(Math.abs(f)<Math.PI/2){const E=$e(h,u);i.push(E)}else{const E=j.fromObject(ke(c,t,f/2)),k=Ke(F.fromVectors(t,j.fromObject(E))),w=$e(h,k),m=$e(k,u);i.push(w,E,m)}i.push(c);const g=je(a,d);if(h=Ke(a),Math.abs(g)<Math.PI/2){const E=$e(h,u);i.push(E)}else{const E=j.fromObject(ke(c,t,g/2)),k=Ke(F.fromVectors(t,j.fromObject(E))),w=$e(u,k),m=$e(k,h);i.push(w,E,m)}return i}function je(e,t){return Math.atan2(e.v.y*t.v.x-e.v.x*t.v.y,e.v.x*t.v.x+e.v.y*t.v.y)}function Vl(e,t,n){const r=e.x,i=e.y,s=t.x,a=t.y,l=n.x,c=n.y,d=r-s,u=i-a,f=l-s,h=c-a;if(d===0&&u===0||f===0&&h===0)return[e,0];const g=(h*(d*(r+s)+u*(i+a))-u*(f*(l+s)+h*(c+a)))/(2*d*h-2*u*f),E=(-f*(d*(r+s)+u*(i+a))+d*(f*(l+s)+h*(c+a)))/(2*d*h-2*u*f),k=Math.sqrt(Math.pow(r-g,2)+Math.pow(i-E,2));return[new j(g,E),k]}function De(e){return e.type=="circle"?e.radius:Math.min(e.width,e.height)/2}function Hl(e){const t=Object.values(e);if(t.length===0)return{top:0,bottom:0,left:0,right:0};const n={top:t[0].y,bottom:t[0].y,left:t[0].x,right:t[0].x};return t.forEach(r=>{n.top=Math.min(r.y,n.top),n.bottom=Math.max(r.y,n.bottom),n.left=Math.min(r.x,n.left),n.right=Math.max(r.x,n.right)}),n}function xt(...e){return e.find(t=>!!t)}const Fl=Number.EPSILON*100;function Wl(e,t,n,r,i,s,a,l){var k,w;const c=e.edges,d=e.directions,u=c.map((m,v)=>Gl(m,d[v],r[m.edgeId])),f=[];let h=!1,g=!1;{const m=u[0];let v=De(t[m.source].shape)*i;const x=l+(a==="edgeOfNode"?v:0),y=x<=0?m.line.source:jo(m,x,n,!0);f.push(y),v=De(t[m.target].shape)*i,l>0&&U.distance(m.line.source,m.line.target)<=x+v&&(h=!0)}const E=c.length;for(let m=1;m<E;m++){const v=u[m-1],x=u[m],y=x.source,p=j.fromObject((k=n[y])!=null?k:{x:0,y:0}),b=Ul(v,x,p),S=De(t[y].shape)*i,M=Math.max(S*(2/3),S-4*i),O=an(v),C=an(x),T=Pt(v,p,M,O),z=Pt(x,p,M,!C),N=Pt(v,p,S,O),W=Pt(x,p,S,!C);let _;if(b){const V=U.distance(b,p);if(V<M)_=[xt(T,N,v.line.target),b,xt(z,W,x.line.source)];else if(V<=S){let le,K;N&&T?le=U.distance(b,T)<U.distance(b,N)?T:N:le=N||v.line.target,W&&z?K=U.distance(b,z)<U.distance(b,W)?z:W:K=W||x.line.source,_=[le,b,K]}else T&&z?_=[T,p,z]:N&&W?_=[N,p,W]:_=[xt(T,N,v.line.target),p,xt(z,W,x.line.source)]}else T&&z?_=[T,p,z]:N&&W?_=[N,p,W]:_=[v.line.target,p,x.line.source];if(v.curve){const V=f[f.length-1];if(V){const le=V instanceof Array?V[V.length-1]:V;let K;_ instanceof Array?K=s?_[0]:_[1]:K=_;const pe=sn(le,v.curve.circle.center,K,v.curve.theta);_ instanceof Array&&s?f.push([...pe,..._]):f.push([...pe,K])}}else if(v.loop){const[V,le,K]=Zo(p,v,S);f.push(V),f.push(K),_ instanceof Array&&s?f.push([le,_[1],_[2]]):f.push(_[2])}else s||!(_ instanceof Array)?f.push(_):x.curve?f.push(_[1]):x.loop?f.push(_[0]):f.push(_[0],_[2])}{const m=u[u.length-1];let v=De(t[m.target].shape)*i;const x=l+(a==="edgeOfNode"?v:0),y=x<=0?m.line.target:jo(m,x,n,!1);if(v=De(t[m.source].shape)*i,m.loop){const p=j.fromObject((w=n[m.target])!=null?w:{x:0,y:0}),[b,S,M]=Zo(p,m,v);f.push(b),f.push(M)}else if(m.curve){const p=f[f.length-1],b=p instanceof Array?p[p.length-1]:p,S=sn(b,m.curve.circle.center,y,m.curve.theta);f.push([...S,y])}else f.push(y);l>0&&U.distance(m.line.source,m.line.target)<=x+v&&(g=!0)}return h&&(f.shift(),f[0]instanceof Array&&f.unshift(f[0][0])),g&&f.pop(),f}function _o(e){const t=e.length;if(t===0)return[];if(t<=1)return[!0];const n=[];let r=null,i=!0;for(let s=0;s<t;s++){const a=e[s].edge.source,l=e[s].edge.target;if(s===0)if(t>2){const c=No(e,0);c===null?i=!0:i=c===l}else i=[e[1].edge.source,e[1].edge.target].includes(l);else a===l?i=!0:i=r===a;n.push(i),r=i?l:a}return n}function No(e,t){const n=e[t],r=e[t+1],i=[n.edge.source,n.edge.target].sort(),s=[r.edge.source,r.edge.target].sort();if(i[0]===i[1])return i[0];if(s[0]===s[1])return s[0];if(n.edgeId===r.edgeId||i[0]===s[0]&&i[1]===s[1]){if(t>=e.length-2)return null;{const a=No(e,t+1);return a===null?null:a===i[1]?i[0]:i[1]}}else return s.includes(i[1])?i[1]:i[0]}function jo(e,t,n,r){const i=r?e.source:e.target,s=e.curve;if(s){let a=t/s.circle.radius;return s.theta>0&&(a*=-1),r||(a*=-1),j.fromObject(ke(r?e.line.source:e.line.target,s.circle.center,a))}else{let a,l;if(r?(a=e.line.target,l=e.line.source):(a=e.line.source,l=e.line.target),n[i]){const c=kt(a,l,j.fromObject(n[i]),t);return c===null?a:c}else return a}}function Ul(e,t,n){let r=null;if(e.loop||t.loop)r=null;else if(e.curve)if(t.curve){if(e.line.target.isEqualTo(t.line.source))return e.line.target.clone();r=Ye(e.curve.circle.center,e.curve.circle.radius,t.curve.circle.center,t.curve.circle.radius,e.curve.center)}else r=Zl(t.line.target,t.line.source,e.curve.circle.center,e.curve.circle.radius,n);else if(t.curve)r=kt(e.line.source,e.line.target,t.curve.circle.center,t.curve.circle.radius);else{const i=Do(e.line),s=Do(t.line);!isFinite(i)&&!isFinite(s)||Math.abs(i-s)<Fl?r=null:r=$e(e.line,t.line)}return r}function Pt(e,t,n,r){if(e.loop){const i=Ye(t,n,e.loop.center,e.loop.radius[0]);return i?r?i[0]:i[1]:null}else return e.curve?Ye(t,n,e.curve.circle.center,e.curve.circle.radius,j.fromObject(e.curve.center)):kt(r?e.line.source:e.line.target,r?e.line.target:e.line.source,t,n)}function Gl(e,t,n){let r=n.origin,i=e.edge.source,s=e.edge.target,a=n.curve;const l=n.loop;l?r=n.position:t||(r=Dl(r),i=e.edge.target,s=e.edge.source,a&&(a=rt(Y({},a),{theta:-a.theta})));const c=F.fromLinePosition(r);return{edgeId:e.edgeId,source:i,target:s,line:c,direction:t,curve:a,loop:l}}function Do(e){return(e.target.y-e.source.y)/(e.target.x-e.source.x)}function Zo(e,t,n){const{radius:r,center:i}=Z(t.loop,"Loop of edge parameter"),[s,a]=r,l=Ye(e,n,i,r[0]);let[c,d]=l?l.reverse():[t.line.source,t.line.target];const u=an(t);u||([c,d]=[d,c]);const f=c,h=d,g=j.fromObject(f).subtract(i).angleDegree();let w=(j.fromObject(h).subtract(i).angleDegree()+360-g)%360>=180;return w=u?w:!w,[f,h,`A ${s} ${a} 0 ${w?1:0} ${u?1:0} ${h.x} ${h.y}`]}function an(e){return e.loop?e.direction?e.loop.isClockwise:!e.loop.isClockwise:!0}function ln(e,t,n,r,i,s,a){const l=o.reactive({});o.watch(()=>new Set(Object.keys(e.value)),(d,u)=>{u||(u=new Set([]));for(const f of d)u.has(f)||Xl(e,l,f,!1,t,i);for(const f of u)d.has(f)||(n.delete(f),r.delete(f),s==null||s(f,l[f]),delete l[f])},{immediate:!0}),o.watch(()=>[...n],(d,u)=>{const f=u?d.filter(g=>!u.includes(g)):d,h=u?u.filter(g=>!d.includes(g)):[];f.forEach(g=>{const E=l[g];E&&!E.selected&&(E.selected=!0)}),h.forEach(g=>{const E=l[g];E&&E.selected&&(E.selected=!1)})},{immediate:!0}),o.watch(()=>[...r],(d,u)=>{const f=d.filter(g=>!u.includes(g)),h=u.filter(g=>!d.includes(g));f.forEach(g=>{const E=l[g];E&&!E.hovered&&(E.hovered=!0)}),h.forEach(g=>{const E=l[g];E&&E.hovered&&(E.hovered=!1)})});const c=o.computed(()=>{const d=a?a():Object.values(l);return t.zOrder.enabled?ql(d,t.zOrder,r,n):d});return{states:l,zOrderedList:c}}function Xl(e,t,n,r,i,s){const a={id:n,selected:r,hovered:!1,selectable:o.computed(()=>e.value[n]?B.value(i.selectable,e.value[n]):o.unref(a.selectable)),zIndex:o.computed(()=>e.value[n]?B.value(i.zOrder.zIndex,e.value[n]):o.unref(a.zIndex))};t[n]=a,s(e,n,t[n])}function ql(e,t,n,r){return t.bringToFrontOnHover&&t.bringToFrontOnSelected?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);if(a!=l)return a?1:-1;const c=r.has(i.id),d=r.has(s.id);return c!=d?c?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnHover?e.sort((i,s)=>{const a=n.has(i.id),l=n.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):t.bringToFrontOnSelected?e.sort((i,s)=>{const a=r.has(i.id),l=r.has(s.id);return a!=l?a?1:-1:i.zIndex-s.zIndex}):e.sort((i,s)=>i.zIndex-s.zIndex)}function Kl(e){return typeof btoa===void 0?Buffer.from(e).toString("base64").replaceAll("=",""):btoa(e).replaceAll("=","")}function Yl(){return{markers:o.reactive({}),referenceCount:{}}}function Ql(e){const{markers:t,referenceCount:n}=e;function r(l,c){var u;const d=(u=n[l])!=null?u:0;n[l]=d+1,d||(t[l]=c)}function i(l){var d;const c=(d=n[l])!=null?d:0;c&&(c-1===0?(delete t[l],delete n[l]):n[l]=c-1)}function s(l){l&&i(l)}function a(l,c,d,u,f){if(l.type==="none"){s(d);return}if(l.type==="custom")return s(d),l.customId;const h=Jl(l,c,u),g=ec(h,f);return g===d||(s(d),r(g,h)),g}return{makeMarker:a,clearMarker:s}}function Jl(e,t,n){var r;return rt(Y({},e),{color:(r=e.color)!=null?r:n,isSource:t})}function ec(e,t){const n=Kl(e.color),r=e.isSource?"L":"R",i=e.units==="strokeWidth"?"rel":"abs";return`marker_${t}_${e.type}_${e.width}_${e.height}_${e.margin}_${e.offset}_${n}_${r}_${i}`}function cn(e,t,n){return{objects:e,selected:t,hovered:n}}const Ro=Symbol("states"),tc={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function nc(e,t,n,r,i,s,a,l){const c=o.reactive({}),d=de({});o.watchEffect(()=>{const y=Object.fromEntries(Object.keys(e.objects.value).map(p=>[p,{}]));Object.entries(t.objects.value).forEach(([p,b])=>{y!=null&&y[b.source]||(y[b.source]={}),y!=null&&y[b.target]||(y[b.target]={}),y[b.source][p]=b.target,y[b.target][p]=b.source}),vt(d,y)});const{states:u,zOrderedList:f}=ln(e.objects,r.node,e.selected,e.hovered,(y,p,b)=>{ic(y,p,b,r.node,d,i,s)},(y,p)=>{const b=i.nodes;delete b[y]}),h=Tl(),g=Bl(e.objects,t.objects,r),E=o.ref([]),{states:k,zOrderedList:w}=ln(t.objects,r.edge,t.selected,t.hovered,(y,p,b)=>{ac(y,p,b,r.edge,a,u,g,i,l,h)},(y,p)=>{var b;(b=p.stopWatchHandle)==null||b.call(p)},()=>E.value);o.watchEffect(()=>{E.value=lc(g.edgeGroups,k)}),o.watch(g.edgeGroups,y=>dc(c,g,r),{immediate:!0});const{states:m,zOrderedList:v}=ln(n.objects,r.path,n.selected,n.hovered,(y,p,b)=>{const S=b;S.clickable=o.computed(()=>y.value[p]?B.value(r.path.clickable,y.value[p]):!1),S.hoverable=o.computed(()=>y.value[p]?B.value(r.path.hoverable,y.value[p]):!1),S.path=y.value[p],S.edges=Fo(S.path,t),S.directions=_o(S.edges),S.stopWatchHandle=o.watch(()=>y.value[p].edges,()=>{S.path=y.value[p],S.edges=Fo(S.path,t),S.directions=_o(S.edges)})},(y,p)=>{var b;(b=p.stopWatchHandle)==null||b.call(p)}),x={nodeStates:u,edgeStates:k,edgeGroupStates:g,summarizedEdgeStates:c,pathStates:m,layouts:i,nodeZOrderedList:f,edgeZOrderedList:w,pathZOrderedList:v};return o.provide(Ro,x),x}function oc(e){return e.summarized}function ce(){return Z(o.inject(Ro),"states")}function rc(e,t,n,r){return n&&r.hover?B.values(r.hover,e):Vo(e,t,r)}function Vo(e,t,n){return t&&n.selected?B.values(n.selected,e):B.values(n.normal,e)}function ic(e,t,n,r,i,s,a){var l,c;!s.nodes[t]&&((l=a.nodes)!=null&&l[t])&&(s.nodes[t]=Y({},(c=a.nodes)==null?void 0:c[t])),n.shape=o.computed(()=>e.value[t]?rc(e.value[t],n.selected,n.hovered,r):o.unref(n.shape)),n.staticShape=o.computed(()=>e.value[t]?Vo(e.value[t],n.selected,r):o.unref(n.staticShape)),n.label=o.computed(()=>e.value[t]?B.values(r.label,e.value[t]):o.unref(n.label)),n.labelText=o.computed(()=>{var d,u;return r.label.text instanceof Function?o.unref(n.label).text:e.value[t]?(u=(d=e.value[t])==null?void 0:d[o.unref(n.label).text])!=null?u:"":o.unref(n.labelText)}),n.draggable=o.computed(()=>e.value[t]?B.value(r.draggable,e.value[t]):o.unref(n.draggable)),n.oppositeNodeIds=o.toRef(i,t),n.oppositeNodes=o.computed(()=>Object.entries(n.oppositeNodeIds).reduce((d,u)=>{const[f,h]=u,g=s.nodes[h];return g&&(d[f]={nodeId:h,pos:Y({},g)}),d},{}))}function sc(e,t,n,r){return t?B.values(r.selected,e):n&&r.hover?B.values(r.hover,e):B.values(r.normal,e)}function Ho(e){return e.type==="none"?tc:e}function ac(e,t,n,r,i,s,a,l,c,d){const{makeMarker:u,clearMarker:f}=Ql(i);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=o.computed(()=>e.value[t]?B.values(r.label,e.value[t]):o.unref(n.label));const h=o.computed(()=>{const m=e.value[t],v=sc(m,n.selected,n.hovered,r);isNaN(+v.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",t,v.width),v.width=1),(v.color===void 0||v.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",t,v.color),v.color="#000000");let x=B.value(r.normal.width,m);isNaN(+x)&&(x=1);const y=Ho(B.values(r.marker.source,[m,v])),p=Ho(B.values(r.marker.target,[m,v]));return{stroke:v,normalWidth:x,source:y,target:p}});n.line=h;const g=o.toRef(a.edgeLayoutPoints,t),E=o.toRef(a.summarizedEdges,t),k=o.watchEffect(()=>{var _,V,le,K,pe,Ae,ot;const m=e.value[t];if(!m)return;const v=(_=s[m.source])==null?void 0:_.staticShape,x=(V=s[m.target])==null?void 0:V.staticShape;if(!v||!x)return;const y=(le=l.nodes[m==null?void 0:m.source])!=null?le:{x:0,y:0},p=(K=l.nodes[m==null?void 0:m.target])!=null?K:{x:0,y:0},b=zl(g.value,(pe=E.value)!=null?pe:!1,y,p,c.value,r.keepOrder),[S,M]=Rl(y,p,v,x),O=c.value;n.labelPosition=nn(b,S*O,M*O);let C=0,T=0;const z=h.value;if(z.source.type!=="none"){const ne=z.source;C=ne.margin+ne.width,ne.units==="strokeWidth"&&(C*=z.normalWidth)}if(z.target.type!=="none"){const ne=z.target;T=ne.margin+ne.width,ne.units==="strokeWidth"&&(T*=z.normalWidth)}r.margin&&(C+=r.margin,T+=r.margin);const N=!!r.margin||z.source.type!=="none"||z.target.type!=="none";if(m.source===m.target){n.origin=Et(y,p);const ne=B.values(r.selfLoop,m),[Re,ie]=uc(y,v,ne,N,C,T,(ot=(Ae=g.value)==null?void 0:Ae.pointInGroup)!=null?ot:0,O);n.position=Re,n.loop=ie,n.curve=void 0;return}else n.loop=void 0;if(N&&(C+=S,T+=M),r.type==="straight"||E.value)n.origin=b,n.curve=void 0,C===0&&T===0?n.position=n.origin:n.position=nn(n.origin,C*O,T*O);else{n.origin=Et(y,p);const ne=g.value?g.value.groupWidth/2-g.value.pointInGroup:0,[Re,ie]=cc(n.origin,b,ne,C*O,T*O);n.position=Re,n.curve=ie}}),w=o.watchEffect(()=>{e.value[t]&&(n.sourceMarkerId=u(h.value.source,!0,n.sourceMarkerId,h.value.stroke.color,d),n.targetMarkerId=u(h.value.target,!1,n.targetMarkerId,h.value.stroke.color,d))});n.stopWatchHandle=()=>{k(),w(),f(n.sourceMarkerId),f(n.targetMarkerId)}}function lc(e,t){return Object.entries(e).map(([n,r])=>{var i;return r.summarize?{id:(i=Object.keys(r.edges)[0])!=null?i:n,summarized:!0,key:n,group:r,zIndex:Object.keys(r.edges).map(s=>{var a,l;return(l=(a=t[s])==null?void 0:a.zIndex)!=null?l:0}).reduce((s,a)=>Math.max(s,a))}:Object.entries(r.edges).map(([s,a])=>{var l,c;return{id:s,summarized:!1,key:s,edge:a,zIndex:(c=(l=t[s])==null?void 0:l.zIndex)!=null?c:0}})}).flat()}function cc(e,t,n,r,i){const s=F.fromLinePosition(e),a=F.fromLinePosition(t),l=Nl(t),[c,d]=Vl(s.source,s.target,l);let u,f;if(d===0)return[e,f];if(n===0)return r===0&&i===0?u=e:u=nn(e,r,i),[u,f];const h=F.fromVectors(c,l),g=je(F.fromVectors(c,s.source),h);if(r===0&&i===0)u=e;else{let m=r/d,v=i/d;g>0&&(m*=-1,v*=-1),u=Et(ke(s.source,c,m),ke(s.target,c,-v));let x=je(F.fromVectors(c,s.source),F.fromVectors(c,s.target)),y=je(F.fromPositions(c,u.p1),F.fromPositions(c,u.p2));if(g*x<0&&(x=rn(x),g*y<0&&(y=rn(y))),x*y<0){const p=l.clone().add(a.v.normalize().multiplyScalar(.5));return u=Et(l,p),[u,f]}}const[E,k]=_l(u),w=sn(E,c,k,g).map(m=>m.toObject());return f={center:l,theta:g,circle:{center:c,radius:d},control:w},[u,f]}function uc(e,t,n,r,i,s,a,l){const c=l,d=(n.radius+a/2)*c,u=n.offset*c+d,f=(n.angle-90)*(Math.PI/180),h=j.fromObject({x:e.x+u*Math.cos(f),y:e.y+u*Math.sin(f)}),g=n.isClockwise;let E,k;if(r){const y=Ye(h,d,j.fromObject(e),De(t)*c);if(y){[E,k]=y;let p=1;if(g||([E,k]=[k,E],p=-1),i!==0||s!==0){const b=i*c/d*p,S=s*c/d*p;E=ke(E,h,b),k=ke(k,h,-S)}}}if(E===void 0||k===void 0){const y=j.fromObject(e).subtract(h).normalize().multiplyScalar(d);let p=1*(Math.PI/180);g||(p*=-1),E=h.clone().add(wt(y,p)),k=h.clone().add(wt(y,-p))}const w=j.fromObject(E).subtract(h).angleDegree(),x=(j.fromObject(k).subtract(h).angleDegree()+360-w)%360>=180;return[{p1:E,p2:k},{center:h,radius:[d,d],isLargeArc:g?x:!x,isClockwise:g}]}function dc(e,t,n){const r=t.edgeGroups;Object.entries(r).filter(([i,s])=>s.summarize&&!(i in e)).forEach(([i,s])=>{const a={stroke:void 0};a.stroke=o.computed(()=>B.values(n.edge.summarized.stroke,s.edges)),e[i]=a}),Object.keys(e).forEach(i=>{var s;(s=t.edgeGroups[i])!=null&&s.summarize||delete e[i]})}function Fo(e,t){return e.edges.map(n=>({edgeId:n,edge:t.objects.value[n]})).filter(n=>n.edge)}class Qe{static valueOf(t){return Array.from(t.values())}}const fc=3,hc=6,Wo=500;function St(e){return e==="touch"?hc:fc}function un(e,t,n,r){let i=e.get(t);if(i)i.id!==n&&(i=void 0);else{const l=Array.from(e.entries()).find(([c,d])=>d.id===n);if(l){const[c,d]=l;e.delete(c),i=d}}let s,a;return[i,s,a]=Uo(i,r,n),e.set(t,i),[s,a]}function Uo(e,t,n){const r=Date.now();e&&r-e.lastTime<=Wo?(e.count++,e.lastTime=r):e={count:1,lastTime:r,id:n};const i={view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,button:t.button,buttons:t.buttons,detail:e.count};let s,a;return t instanceof PointerEvent?(Object.assign(i,{pointerId:t.pointerId,width:t.width,height:t.height,pressure:t.pressure,tangentialPressure:t.tangentialPressure,tiltX:t.tiltX,tiltY:t.tiltY,twist:t.twist,pointerType:t.pointerType,isPrimary:t.isPrimary}),s=new PointerEvent("click",i),e.count===2&&(a=new PointerEvent("dblclick",i))):(s=new MouseEvent("click",i),e.count===2&&(a=new MouseEvent("dblclick",i))),[e,s,a]}function dn(e){const t=Date.now();Array.from(e.entries()).filter(([n,r])=>t-r.lastTime>Wo).map(([n,r])=>e.delete(n))}function pc(e,t,n,r,i,s,a){const l={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:g,pointerup:k,pointercancel:E};function d(y){const p=l.follow.followedPointerId===y.pointerId,b=i.has(y.nodeId),S=!(y.pointerId in l.pointers);if(p&&S||p&&!b){const M=Qe.valueOf(l.pointers).find(O=>i.has(O.nodeId));if(!M){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=M,l.follow.followedPointerId=y.pointerId}else{const M=l.pointers.get(l.follow.followedPointerId);if(!M){l.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=M}if(p||b){const M=Qe.valueOf(l.pointers).map(O=>O.nodeId);l.follow.nodeBasePositions=Object.fromEntries(Array.from(i).filter(O=>!M.includes(O)).filter(O=>{var C;return(C=e[O])==null?void 0:C.draggable}).map(O=>[O,fn(t.nodes,O)])),y.dragBasePosition=Y({},y.latestPosition),y.nodeBasePosition=fn(t.nodes,y.nodeId)}}o.watch(i,y=>{const p=l.pointers.get(l.follow.followedPointerId);p&&d(p),y.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":y.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),o.watch(n.selectionMode,y=>{y!=="node"&&i.clear()});function u(y,p){const b=y.dragBasePosition.x-p.pageX,S=y.dragBasePosition.y-p.pageY,M=l.follow.followedPointerId==y.pointerId?Y({[y.nodeId]:y.nodeBasePosition},l.follow.nodeBasePositions):{[y.nodeId]:y.nodeBasePosition},O=s.value;return Object.fromEntries(Object.entries(M).map(([C,T])=>[C,{x:T.x-b/O,y:T.y-S/O}]))}function f(y,p){var S,M;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const b=(M=(S=e[y])==null?void 0:S.selectable)!=null?M:!1;if(b){const O=Qe.valueOf(l.pointers).filter(C=>i.has(C.nodeId)).length>0;p.shiftKey||O?i.has(y)?i.delete(y):typeof b=="number"&&i.size>=b||i.add(y):i.has(y)||(i.clear(),i.add(y))}a.emit("node:click",{node:y,event:p})}function h(y,p){p.isTrusted||a.emit("node:dblclick",{node:y,event:p})}function g(y){var M;y.stopPropagation();const p=l.pointers.get(y.pointerId);if(!p)return;p.latestPosition={x:y.pageX,y:y.pageY},p.moveCounter++;const b=St(y.pointerType);if(p.moveCounter<=b||!((M=e[p.nodeId])!=null&&M.draggable))return;if(p.moveCounter===b+1){const O=u(p,{pointerId:p.pointerId,pageX:p.dragBasePosition.x,pageY:p.dragBasePosition.y});a.emit("node:dragstart",O)}const S=u(p,y);a.emit("node:pointermove",S)}function E(y){y.stopPropagation();let p=l.pointers.get(y.pointerId);if(p){for(p of l.pointers.values()){const b=p.nodeId,S=St(y.pointerType);if(p.moveCounter>S){const O=u(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});a.emit("node:dragend",O)}a.emit("node:pointerup",{node:b,event:y})}l.pointers.clear(),l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([b,S])=>{document.removeEventListener(b,S)}),n.viewMode.value="default"}}function k(y){var O,C,T;y.stopPropagation();const p=l.pointers.get(y.pointerId);if(!p)return;l.pointers.delete(y.pointerId);const b=p.nodeId,S=St(y.pointerType),M=p.moveCounter>S;if(M){if((O=e[p.nodeId])!=null&&O.draggable){const z=u(p,y);a.emit("node:dragend",z),a.emit("node:pointerup",{node:b,event:y})}}else a.emit("node:pointerup",{node:b,event:y});if(!M){const[z,N]=un(l.clicks,p.pointerId,b,y);(C=p.eventTarget)==null||C.dispatchEvent(z),N&&((T=p.eventTarget)==null||T.dispatchEvent(N))}l.pointers.size===0?(l.follow={followedPointerId:-1,nodeBasePositions:{}},ee(c).forEach(([z,N])=>{document.removeEventListener(z,N)}),dn(l.clicks),n.viewMode.value="default"):d(p),r.clear(),l.hoveredNodesPre.forEach(r.add,r)}function w(y,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;l.pointers.size==0&&(n.viewMode.value="node",ee(c).forEach(([S,M])=>{document.addEventListener(S,M)}));const b={pointerId:p.pointerId,nodeId:y,moveCounter:0,nodeBasePosition:fn(t.nodes,y),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};l.pointers.set(p.pointerId,b),i.has(y)&&(l.follow.followedPointerId<0?(l.follow.followedPointerId=p.pointerId,d(b)):delete l.follow.nodeBasePositions[b.nodeId]),a.emit("node:pointerdown",{node:y,event:p})}function m(y,p){l.hoveredNodesPre.add(y),!(l.pointers.size>0)&&(r.add(y),a.emit("node:pointerover",{node:y,event:p}))}function v(y,p){l.hoveredNodesPre.delete(y),!(l.pointers.size>0)&&(r.delete(y),a.emit("node:pointerout",{node:y,event:p}))}function x(y,p){p.stopPropagation(),a.emit("node:contextmenu",{node:y,event:p})}return{handleNodePointerDownEvent:w,handleNodePointerOverEvent:m,handleNodePointerOutEvent:v,handleNodeClickEvent:f,handleNodeDoubleClickEvent:h,handleNodeContextMenu:x}}function fn(e,t){var r;const n=(r=e[t])!=null?r:{x:0,y:0};return Y({},n)}function gc(e,t,n,r,i){const s={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:c,pointercancel:d};o.watch(r,p=>{p.size>0&&t.selectionMode.value!=="edge"?t.selectionMode.value="edge":p.size===0&&t.selectionMode.value==="edge"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,p=>{p!=="edge"&&r.clear()});function l(p,b){if(b.button==2||(b.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([M,O])=>{document.addEventListener(M,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:b.pointerId,id:p,eventTarget:b.currentTarget};s.pointers.set(b.pointerId,S),i.emit("edge:pointerdown",ae(p,b))}function c(p){var C,T;p.stopPropagation();const b=s.pointers.get(p.pointerId);if(!b)return;s.pointers.delete(p.pointerId);const S=b.id;i.emit("edge:pointerup",ae(S,p));const[M,O]=un(s.clicks,b.pointerId,S instanceof Array?S.join(","):S,p);(C=b.eventTarget)==null||C.dispatchEvent(M),O&&((T=b.eventTarget)==null||T.dispatchEvent(O)),s.pointers.size===0&&(s.pointerPeekCount=0,ee(a).forEach(([z,N])=>{document.removeEventListener(z,N)}),dn(s.clicks),t.viewMode.value="default")}function d(p){if(p.stopPropagation(),!!s.pointers.get(p.pointerId)){for(const S of s.pointers.values()){const M=S.id;i.emit("edge:pointerup",ae(M,p))}s.pointers.clear(),s.pointerPeekCount=0,ee(a).forEach(([S,M])=>{document.removeEventListener(S,M)}),i.emit("view:mode","default")}}function u(p,b){var O;if(b.isTrusted||b.shiftKey&&!["container","edge"].includes(t.selectionMode.value))return;t.selectionMode.value="edge";const S=p instanceof Array?p:[p],M=Qe.valueOf(s.pointers).filter(C=>(C.id instanceof Array?C.id:[C.id]).every(z=>r.has(z))).length>0;if(p instanceof Array)S.find(T=>{var z;return(z=e[T])==null?void 0:z.selectable})&&(b.shiftKey||M?S.some(T=>r.has(T))?S.forEach(T=>r.delete(T)):S.forEach(T=>{var N;const z=(N=e[T])==null?void 0:N.selectable;typeof z=="number"&&r.size>=z||r.add(T)}):(r.clear(),S.forEach(T=>r.add(T))));else{const C=(O=e[p])==null?void 0:O.selectable;C&&(b.shiftKey||M?r.has(p)?r.delete(p):typeof C=="number"&&r.size>=C||r.add(p):r.has(p)||(r.clear(),r.add(p)))}i.emit("edge:click",ae(p,b))}function f(p,b){b.isTrusted||i.emit("edge:dblclick",ae(p,b))}function h(p,b){n.add(p),i.emit("edge:pointerover",ae(p,b))}function g(p,b){n.delete(p),i.emit("edge:pointerout",ae(p,b))}function E(p,b){b.stopPropagation(),i.emit("edge:contextmenu",ae(p,b))}function k(p,b){if(b.button==2||(b.stopPropagation(),!["default","edge"].includes(t.viewMode.value)))return;s.pointers.size==0&&(t.viewMode.value="edge",ee(a).forEach(([M,O])=>{document.addEventListener(M,O)}),s.pointerPeekCount=0),s.pointerPeekCount++;const S={pointerId:b.pointerId,id:p,eventTarget:b.currentTarget};s.pointers.set(b.pointerId,S),i.emit("edge:pointerdown",ae(p,b))}function w(p,b){p.forEach(S=>n.add(S)),i.emit("edge:pointerover",ae(p,b))}function m(p,b){p.forEach(S=>n.delete(S)),i.emit("edge:pointerout",ae(p,b))}function v(p,b){u(p,b)}function x(p,b){f(p,b)}function y(p,b){b.stopPropagation(),i.emit("edge:contextmenu",ae(p,b))}return{handleEdgePointerDownEvent:l,handleEdgePointerOverEvent:h,handleEdgePointerOutEvent:g,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:f,handleEdgeContextMenu:E,handleEdgesPointerDownEvent:k,handleEdgesPointerOverEvent:w,handleEdgesPointerOutEvent:m,handleEdgesClickEvent:v,handleEdgesDoubleClickEvent:x,handleEdgesContextMenu:y}}function ae(e,t){return e instanceof Array?{edges:e,event:t,summarized:!0}:{edge:e,edges:[e],event:t,summarized:!1}}function mc(e,t,n,r){const i={moveCounter:0,pointerCounter:0,clickState:void 0},s={pointermove:l,pointerup:c,pointercancel:c};function a(g){i.moveCounter=0,i.pointerCounter===0&&ee(s).forEach(([E,k])=>{document.addEventListener(E,k,{passive:!0})}),i.pointerCounter++}function l(g){i.moveCounter++}function c(g){if(i.pointerCounter--,i.pointerCounter<=0){i.pointerCounter=0,ee(s).forEach(([k,w])=>{document.removeEventListener(k,w)});const E=St(g.pointerType);if(i.moveCounter<=E){if(g.shiftKey&&t.selectionMode.value!=="container")return;t.selectionMode.value="container";const[k,w,m]=Uo(i.clickState,g,"view");i.clickState=k,e.value.dispatchEvent(w),m&&e.value.dispatchEvent(m)}}}function d(g){g.isTrusted||(g.stopPropagation(),r.emit("view:click",{event:g}))}function u(g){g.isTrusted||(g.stopPropagation(),r.emit("view:dblclick",{event:g}))}function f(g){r.emit("view:contextmenu",{event:g}),i.pointerCounter>0&&(i.pointerCounter=0,ee(s).forEach(([E,k])=>{var w;(w=e.value)==null||w.removeEventListener(E,k)}))}const h=g=>{g.preventDefault()};o.onMounted(()=>{const g=e.value;g&&(g.addEventListener("pointerdown",a,{passive:!0}),g.addEventListener("click",d,{passive:!1}),g.addEventListener("dblclick",u,{passive:!1}),g.addEventListener("contextmenu",f,{passive:!1}),n.value&&g.addEventListener("wheel",h,{passive:!1}))}),o.onUnmounted(()=>{const g=e.value;g&&(g.removeEventListener("pointerdown",a),g.removeEventListener("click",d),g.removeEventListener("dblclick",u),g.removeEventListener("contextmenu",f),n.value&&g.removeEventListener("wheel",h))}),o.watch(n,(g,E)=>{const k=e.value;!k||g===E||(g?k.addEventListener("wheel",h,{passive:!1}):k.removeEventListener("wheel",h))})}function bc(e,t,n,r,i,s){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function l(m,v){var x,y;return i.value?{path:(y=(x=e[m])==null?void 0:x.path)!=null?y:m,event:v}:{path:m,event:v}}const c={pointerup:u,pointercancel:f};o.watch(r,m=>{m.size>0&&t.selectionMode.value!=="path"?t.selectionMode.value="path":m.size===0&&t.selectionMode.value==="path"&&(t.selectionMode.value="container")}),o.watch(t.selectionMode,m=>{m!=="path"&&r.clear()});function d(m,v){var y;if(!((y=e[m])!=null&&y.clickable)||v.button==2||(v.stopPropagation(),!["default","path"].includes(t.viewMode.value)))return;a.pointers.size==0&&(t.viewMode.value="path",ee(c).forEach(([p,b])=>{document.addEventListener(p,b)}),a.pointerPeekCount=0),a.pointerPeekCount++;const x={pointerId:v.pointerId,id:m,eventTarget:v.currentTarget};a.pointers.set(v.pointerId,x),s.emit("path:pointerdown",l(m,v))}function u(m){var b,S;const v=a.pointers.get(m.pointerId);if(!v)return;m.stopPropagation(),a.pointers.delete(m.pointerId);const x=v.id;s.emit("path:pointerup",l(x,m));const[y,p]=un(a.clicks,v.pointerId,x,m);(b=v.eventTarget)==null||b.dispatchEvent(y),p&&((S=v.eventTarget)==null||S.dispatchEvent(p)),a.pointers.size===0&&(a.pointerPeekCount=0,ee(c).forEach(([M,O])=>{document.removeEventListener(M,O)}),dn(a.clicks),t.viewMode.value="default")}function f(m){if(a.pointers.get(m.pointerId)){m.stopPropagation();for(const x of a.pointers.values()){const y=x.id;s.emit("path:pointerup",l(y,m))}a.pointers.clear(),a.pointerPeekCount=0,ee(c).forEach(([x,y])=>{document.removeEventListener(x,y)}),s.emit("view:mode","default")}}function h(m,v){var x;(x=e[m])!=null&&x.hoverable&&(n.add(m),s.emit("path:pointerover",l(m,v)))}function g(m,v){var x;(x=e[m])!=null&&x.hoverable&&(n.delete(m),s.emit("path:pointerout",l(m,v)))}function E(m,v){var y,p,b;if(v.isTrusted||!((y=e[m])!=null&&y.clickable)||v.shiftKey&&!["container","path"].includes(t.selectionMode.value))return;t.selectionMode.value="path";const x=(b=(p=e[m])==null?void 0:p.selectable)!=null?b:!1;if(x){const S=Qe.valueOf(a.pointers).filter(M=>r.has(M.id)).length>0;v.shiftKey||S?r.has(m)?r.delete(m):typeof x=="number"&&r.size>=x||r.add(m):r.has(m)||(r.clear(),r.add(m))}s.emit("path:click",l(m,v))}function k(m,v){var x;v.isTrusted||(x=e[m])!=null&&x.clickable&&s.emit("path:dblclick",l(m,v))}function w(m,v){var x;(x=e[m])!=null&&x.clickable&&(v.stopPropagation(),s.emit("path:contextmenu",l(m,v)))}return{handlePathPointerDownEvent:d,handlePathPointerOverEvent:h,handlePathPointerOutEvent:g,handlePathClickEvent:E,handlePathDoubleClickEvent:k,handlePathContextMenu:w}}function yc(e){return ue(this,null,function*(){const n=yield(yield fetch(e)).blob();return new Promise((r,i)=>{try{const s=new FileReader;s.onload=function(){r(this.result)},s.readAsDataURL(n)}catch(s){i(s)}})})}function hn(e,t,n){var s;const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((s=t.getCTM())==null?void 0:s.inverse());return{x:i.x,y:i.y}}function vc(e,t,n){const r=e.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform(t.getCTM());return{x:i.x,y:i.y}}function Go(e,t,n){var d;const r=e.cloneNode(!0),i=t.getBBox(),s=1/n,a={x:Math.floor((i.x-10)*s),y:Math.floor((i.y-10)*s),width:Math.ceil((i.width+20)*s),height:Math.ceil((i.height+20)*s)};r.setAttribute("width",a.width.toString()),r.setAttribute("height",a.height.toString());const l=r.querySelector(".v-ng-viewport");l.setAttribute("transform",`translate(${-a.x} ${-a.y}), scale(${s})`),l.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${a.width} ${a.height}`),r.removeAttribute("style");const c=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;c.nextNode();){const u=c.referenceNode;(d=u.parentNode)==null||d.removeChild(u)}return r}function wc(e){return ue(this,null,function*(){let t=!1,n=e.getAttribute("href");if(n||(t=!0,n=e.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const r=yield yc(n);e.setAttribute(t?"xlink:href":"href",r)}catch(r){console.warn("Image download failed.",n);return}})}function Ec(i,s,a){return ue(this,arguments,function*(e,t,n,r={}){const l=Go(e,t,n);if(r.embedImages){const d=Array.from(l.querySelectorAll("image")).map(u=>wc(u));yield Promise.all(d)}return l})}function kc(e,t,n,r,i,s){const a=o.computed(()=>!!s.node.selectable&&s.view.boxSelectionEnabled),l=o.computed(()=>t.viewMode.value==="box-selection"),c=o.ref(),d=o.ref(),u={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},f=ul(()=>{xc(Z(e.value,"container"),Z(c.value,"viewport"),d,n.nodes,r,i,u.selectedNodesAtSelectStarted,u.selectionType)},50,{maxWait:100}),h=new Pc(e,E,k,w,g,m);function g(b){if(u.options.stopTrigger!=="click"||u.pointers.size>0)return;const S={x:b.offsetX,y:b.offsetY};u.startPoint&&j.fromObject(u.startPoint).distance(S)>10||p()}function E(b){b.stopPropagation();const S={x:b.offsetX,y:b.offsetY};u.pointers.size===0&&(u.startPoint=S,h.activate(),u.selectedNodesAtSelectStarted.clear(),i.forEach(M=>u.selectedNodesAtSelectStarted.add(M)),u.options.selectionTypeWithShiftKey==="same"?u.selectionType=u.options.selectionType:u.selectionType=b.shiftKey?u.options.selectionTypeWithShiftKey:u.options.selectionType),u.pointers.has(b.pointerId)||u.pointers.add(b.pointerId),u.points.set(b.pointerId,S),v()}function k(b){if(u.pointers.delete(b.pointerId),u.pointers.size===1){const S=Z(e.value).getBoundingClientRect(),M={x:b.x-S.x,y:b.y-S.y};u.startPoint=M}else u.pointers.size===0&&(h.deactivate(),u.options.stopTrigger==="pointerup"&&p(),u.selectedNodesAtSelectStarted.clear());v()}function w(b){const S=Z(e.value).getBoundingClientRect(),M={x:b.x-S.x,y:b.y-S.y};u.points.set(b.pointerId,M),v(),f()}function m(b){b.key==="Escape"&&u.options.stopTrigger!=="manual"&&(b.stopPropagation(),p())}function v(){let b,S;const M=Array.from(u.pointers);if(M.length>=2){const O=M[0],C=M[M.length-1];b=u.points.get(O),S=u.points.get(C)}else if(u.startPoint&&M.length===1){const O=M[0];b=u.startPoint,S=u.points.get(O)}else b=void 0,S=void 0;b&&S?(d.value={pos:{x:Math.min(b.x,S.x),y:Math.min(b.y,S.y)},size:{width:Math.abs(S.x-b.x),height:Math.abs(S.y-b.y)}},d.value.size.width===0&&(d.value.size.width=1),d.value.size.height===0&&(d.value.size.height=1)):d.value&&(d.value=void 0)}const x=new Sc(e,b=>{a.value&&s.view.selection.detector(b)&&(y({stop:"manual",type:"append",withShiftKey:"invert"}),x.activate())},b=>{a.value&&s.view.selection.detector(b)&&(u.pointers.size===0?p():u.options.stopTrigger="pointerup",x.deactivate())});o.watch(a,b=>{b?x.register():x.unregister()}),o.onMounted(()=>{var b;c.value=(b=e.value)==null?void 0:b.querySelector(".v-ng-viewport"),a.value&&x.register()}),o.onUnmounted(()=>{p(),a.value&&x.unregister()});function y(b={}){var S,M,O;u.options={stopTrigger:(S=b.stop)!=null?S:"pointerup",selectionType:(M=b.type)!=null?M:"append",selectionTypeWithShiftKey:(O=b.withShiftKey)!=null?O:"same"},t.viewMode.value!=="box-selection"&&(t.viewMode.value="box-selection",u.pointers.clear(),h.register())}function p(){t.viewMode.value==="box-selection"&&(t.viewMode.value="default",h.unregister())}return{isBoxSelectionMode:l,selectionBox:d,startBoxSelection:y,stopBoxSelection:p}}function xc(e,t,n,r,i,s,a,l){if(!n.value)return;const c=n.value,d=hn(e,t,c.pos),u=hn(e,t,{x:c.pos.x+c.size.width,y:c.pos.y+c.size.height}),f=new Set(Object.entries(r).filter(([h,g])=>d.x<=g.x&&g.x<=u.x&&d.y<=g.y&&g.y<=u.y).map(([h,g])=>h));if(l==="append")s.forEach(h=>{f.has(h)||s.delete(h)}),f.forEach(h=>{var E,k;const g=(k=(E=i[h])==null?void 0:E.selectable)!=null?k:!1;(g===!0||typeof g=="number"&&s.size<g)&&s.add(h)});else{const h=new Set(a);h.forEach(g=>{f.has(g)&&h.delete(g)}),f.forEach(g=>{var E,k;if(!a.has(g)){const w=(k=(E=i[g])==null?void 0:E.selectable)!=null?k:!1;(w===!0||typeof w=="number"&&h.size<w)&&h.add(g)}}),s.clear(),h.forEach(g=>s.add(g))}}class Pc{constructor(t,n,r,i,s,a){this._container=t,this._handlePointerDownEvent=n,this._handlePointerUpEvent=r,this._handlePointerMoveEvent=i,this._handleClickEvent=s,this._handleKeyDownEvent=a,this._ignoreEvent=l=>l.stopPropagation()}register(){const t={capture:!0,passive:!1},n=Z(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,t),n.addEventListener("click",this._handleClickEvent,t),n.addEventListener("pointerenter",this._ignoreEvent,t),n.addEventListener("pointerleave",this._ignoreEvent,t),document.addEventListener("keydown",this._handleKeyDownEvent,t)}activate(){const t={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,t),document.addEventListener("pointerup",this._handlePointerUpEvent,t)}deactivate(){const t={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,t),document.removeEventListener("pointerup",this._handlePointerUpEvent,t)}unregister(){this.deactivate();const t={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,t),n.removeEventListener("click",this._handleClickEvent,t),n.removeEventListener("pointerenter",this._ignoreEvent,t),n.removeEventListener("pointerleave",this._ignoreEvent,t),document.removeEventListener("keydown",this._handleKeyDownEvent,t)}}}class Sc{constructor(t,n,r){this._container=t,this._handleKeyDownEvent=n,this._handleKeyUpEvent=r,this._preventDefault=i=>{i.stopPropagation(),i.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),Z(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Xo=Symbol("mouseEventHandlers");function Mc(e,t,n,r,i,s,a,l,c,d,u,f,h,g,E,k){const w={selectionMode:o.ref("container"),viewMode:o.ref("default")};a.size>0?w.selectionMode.value="node":l.size>0?w.selectionMode.value="edge":c.size>0&&(w.selectionMode.value="path"),o.watch(w.viewMode,v=>{k.emit("view:mode",v)}),mc(e,w,g,k);const m=Y(Y(Y(Y({selectedNodes:a,hoveredNodes:d,selectedEdges:l,hoveredEdges:u,selectedPaths:c,hoveredPaths:f},pc(r,t,w,d,a,n,k)),gc(i,w,u,l,k)),bc(s,w,f,c,h,k)),kc(e,w,t,r,a,E));return o.provide(Xo,m),m}function Je(){return Z(o.inject(Xo),"mouseEventHandlers")}function Cc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(i){i(n)}),(r=e.get("*"))&&r.slice().map(function(i){i(t,n)})}}}const qo=Symbol("emitter");function Tc(){const e=Cc();return o.provide(qo,e),e}function Oc(){return Z(o.inject(qo),"event emitter")}var Mt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Bc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ct={getGlobalThis:function(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Mt!="undefined")return Mt;if(typeof this!="undefined")return this;throw new Error("Unable to locate global `this`")},extend:function(e,t){e=e||{};for(var n in t)this.isObject(t[n])?e[n]=this.extend(e[n],t[n]):e[n]=t[n];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var t,n;if(this.isElement(e))t=e;else if(typeof e=="string"||e instanceof String){if(t=document.querySelector(e),!t)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(t.tagName.toLowerCase()==="svg")n=t;else if(t.tagName.toLowerCase()==="object")n=t.contentDocument.documentElement;else if(t.tagName.toLowerCase()==="embed")n=t.getSVGDocument().documentElement;else throw t.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return n},proxy:function(e,t){return function(){return e.apply(t,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,t){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var n=t.getBoundingClientRect();e.clientX=e.touches[0].pageX-n.left,e.clientY=e.touches[0].pageY-n.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,t,n){if(e.touches!==void 0&&e.touches.length){if(e.touches[n].clientX!==void 0)e.clientX=e.touches[n].clientX,e.clientY=e.touches[n].clientY;else if(e.touches[n].pageX!==void 0){var r=t.getBoundingClientRect();e.clientX=e.touches[n].pageX-r.left,e.clientY=e.touches[n].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,t){if(e.detail===2)return!0;if(t!=null){var n=e.timeStamp-t.timeStamp,r=Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2));return n<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,t,n){var r=this,i,s,a,l=null,c=0;n||(n={});var d=function(){c=n.leading===!1?0:r.now(),l=null,a=e.apply(i,s),l||(i=s=null)};return function(){var u=r.now();!c&&n.leading===!1&&(c=u);var f=t-(u-c);return i=this,s=arguments,f<=0||f>t?(clearTimeout(l),l=null,c=u,a=e.apply(i,s),l||(i=s=null)):!l&&n.trailing!==!1&&(l=setTimeout(d,f)),a}},createRequestAnimationFrame:function(e){var t=null;return e!=="auto"&&e<60&&e>1&&(t=Math.floor(1e3/e)),t===null?window.requestAnimationFrame||Ko(33):Ko(t)},calculateDistance:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}};function Ko(e){return function(t){window.setTimeout(t,e)}}var zc=Ct,Ic=function(){var e="",t,n,r,i=[],s={passive:!0},a={passive:!1};zc.getGlobalThis().addEventListener?(t="addEventListener",n="removeEventListener"):(t="attachEvent",n="detachEvent",e="on");function l(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function c(k,w){var m=function(v){!v&&(v=window.event);var x={originalEvent:v,target:v.target||v.srcElement,type:"wheel",deltaMode:v.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){v.preventDefault?v.preventDefault():v.returnValue=!1}};return l()=="mousewheel"?(x.deltaY=-.025*v.wheelDelta,v.wheelDeltaX&&(x.deltaX=-.025*v.wheelDeltaX)):x.deltaY=v.detail,w(x)};return i.push({element:k,fn:m}),m}function d(k){for(var w=0;w<i.length;w++)if(i[w].element===k)return i[w].fn;return function(){}}function u(k){for(var w=0;w<i.length;w++)if(i[w].element===k)return i.splice(w,1)}function f(k,w,m,v){var x;l()==="wheel"?x=m:x=c(k,m),k[t](e+w,x,v?s:a)}function h(k,w,m,v){var x;l()==="wheel"?x=m:x=d(k),k[n](e+w,x,v?s:a),u(k)}function g(k,w,m){f(k,l(),w,m),l()=="DOMMouseScroll"&&f(k,"MozMousePixelScroll",w,m)}function E(k,w,m){h(k,l(),w,m),l()=="DOMMouseScroll"&&h(k,"MozMousePixelScroll",w,m)}return{on:g,off:E}}(),Tt=Ct,Yo="unknown";typeof document!="undefined"&&document.documentMode&&(Yo="ie");var pn={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(e){if(e.clientWidth&&e.clientHeight)return{width:e.clientWidth,height:e.clientHeight};if(e.getBoundingClientRect())return e.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(e,t){var n=null;if(Tt.isElement(t)?n=t:n=e.querySelector(t),!n){var r=Array.prototype.slice.call(e.childNodes||e.children).filter(function(c){return c.nodeName!=="defs"&&c.nodeName!=="#text"});r.length===1&&r[0].nodeName==="g"&&r[0].getAttribute("transform")===null&&(n=r[0])}if(!n){var i="viewport-"+new Date().toISOString().replace(/\D/g,"");n=document.createElementNS(this.svgNS,"g"),n.setAttribute("id",i);var s=e.childNodes||e.children;if(s&&s.length>0)for(var a=s.length;a>0;a--)s[s.length-a].nodeName!=="defs"&&n.appendChild(s[s.length-a]);e.appendChild(n)}var l=[];return n.getAttribute("class")&&(l=n.getAttribute("class").split(" ")),~l.indexOf("svg-pan-zoom_viewport")||(l.push("svg-pan-zoom_viewport"),n.setAttribute("class",l.join(" "))),n},setupSvgAttributes:function(e){if(e.setAttribute("xmlns",this.svgNS),e.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),e.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),e.parentNode!==null){var t=e.getAttribute("style")||"";t.toLowerCase().indexOf("overflow")===-1&&e.setAttribute("style","overflow: hidden; "+t)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:Tt.throttle(function(){for(var e=document.querySelectorAll("defs"),t=e.length,n=0;n<t;n++){var r=e[n];r.parentNode.insertBefore(r,r)}},Mt?Mt.internetExplorerRedisplayInterval:null),setCTM:function(e,t,n){var r=this,i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttributeNS(null,"transform",i),"transform"in e.style?e.style.transform=i:"-ms-transform"in e.style?e.style["-ms-transform"]=i:"-webkit-transform"in e.style&&(e.style["-webkit-transform"]=i),Yo==="ie"&&n&&(n.parentNode.insertBefore(n,n),window.setTimeout(function(){r.refreshDefsGlobal()},r.internetExplorerRedisplayInterval))},getEventPoint:function(e,t){var n=t.createSVGPoint();return Tt.mouseAndTouchNormalize(e,t),n.x=e.clientX,n.y=e.clientY,n},getTouchPoint:function(e,t,n){var r=t.createSVGPoint();return Tt.touchNormalize(e,t,n),r.x=e.clientX,r.y=e.clientY,r},getSvgCenterPoint:function(e,t,n){return this.createSVGPoint(e,t/2,n/2)},createSVGPoint:function(e,t,n){var r=e.createSVGPoint();return r.x=t,r.y=n,r}},oe=pn,$c={enable:function(e){var t=e.svg.querySelector("defs");t||(t=document.createElementNS(oe.svgNS,"defs"),e.svg.appendChild(t));var n=t.querySelector("style#svg-pan-zoom-controls-styles");if(!n){var r=document.createElementNS(oe.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",t.appendChild(r)}var i=document.createElementNS(oe.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-in"),t.setAttribute("transform","translate(30.5 5) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},_createZoomReset:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),t.setAttribute("transform","translate(5 35) scale(0.4)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().reset()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","2"),n.setAttribute("y","2"),n.setAttribute("width","182"),n.setAttribute("height","58"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r);var i=document.createElementNS(oe.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(i),t},_createZoomOut:function(e){var t=document.createElementNS(oe.svgNS,"g");t.setAttribute("id","svg-pan-zoom-zoom-out"),t.setAttribute("transform","translate(30.5 70) scale(0.015)"),t.setAttribute("class","svg-pan-zoom-control"),t.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),t.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var n=document.createElementNS(oe.svgNS,"rect");n.setAttribute("x","0"),n.setAttribute("y","0"),n.setAttribute("width","1500"),n.setAttribute("height","1400"),n.setAttribute("class","svg-pan-zoom-control-background"),t.appendChild(n);var r=document.createElementNS(oe.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),t.appendChild(r),t},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},Ac=pn,xe=Ct,X=function(e,t){this.init(e,t)};X.prototype.init=function(e,t){this.viewport=e,this.options=t,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=xe.proxy(this.updateCTM,this),this.requestAnimationFrame=xe.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var n=this.processCTM();this.setCTM(n),this.updateCTM()},X.prototype.cacheViewBox=function(){var e=this.options.svg.getAttribute("viewBox");if(e){var t=e.split(/[\s\,]/).filter(function(r){return r}).map(parseFloat);this.viewBox.x=t[0],this.viewBox.y=t[1],this.viewBox.width=t[2],this.viewBox.height=t[3];var n=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(n)?n:1,this.activeState.x=(this.options.width-this.viewBox.width*n)/2,this.activeState.y=(this.options.height-this.viewBox.height*n)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},X.prototype.simpleViewBoxCache=function(){var e=this.viewport.getBBox();this.viewBox.x=e.x,this.viewBox.y=e.y,this.viewBox.width=e.width,this.viewBox.height=e.height},X.prototype.getViewBox=function(){return xe.extend({},this.viewBox)},X.prototype.processCTM=function(){var e=this.getCTM();if(this.options.fit||this.options.contain){var t;this.options.fit?t=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):t=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),t=isFinite(t)?t:1,e.a=t,e.d=t,e.e=-this.viewBox.x*t,e.f=-this.viewBox.y*t}if(this.options.center){var n=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*e.a)*.5,r=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*e.a)*.5;e.e=n,e.f=r}return this.originalState.zoom=e.a,this.originalState.x=e.e,this.originalState.y=e.f,e},X.prototype.getOriginalState=function(){return xe.extend({},this.originalState)},X.prototype.getState=function(){return xe.extend({},this.activeState)},X.prototype.getZoom=function(){return this.activeState.zoom},X.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},X.prototype.computeRelativeZoom=function(e){return e/this.originalState.zoom},X.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},X.prototype.getCTM=function(){var e=this.options.svg.createSVGMatrix();return e.a=this.activeState.zoom,e.b=0,e.c=0,e.d=this.activeState.zoom,e.e=this.activeState.x,e.f=this.activeState.y,e},X.prototype.setCTM=function(e){var t=this.isZoomDifferent(e),n=this.isPanDifferent(e);if(t||n){if(t&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(e.a))===!1?(e.a=e.d=this.activeState.zoom,t=!1):(this.updateCache(e),this.options.onZoom(this.getRelativeZoom()))),n){var r=this.options.beforePan(this.getPan(),{x:e.e,y:e.f}),i=!1,s=!1;r===!1?(e.e=this.getPan().x,e.f=this.getPan().y,i=s=!0):xe.isObject(r)&&(r.x===!1?(e.e=this.getPan().x,i=!0):xe.isNumber(r.x)&&(e.e=r.x),r.y===!1?(e.f=this.getPan().y,s=!0):xe.isNumber(r.y)&&(e.f=r.y)),i&&s||!this.isPanDifferent(e)?n=!1:(this.updateCache(e),this.options.onPan(this.getPan()))}(t||n)&&this.updateCTMOnNextFrame()}},X.prototype.isZoomDifferent=function(e){return this.activeState.zoom!==e.a},X.prototype.isPanDifferent=function(e){return this.activeState.x!==e.e||this.activeState.y!==e.f},X.prototype.updateCache=function(e){this.activeState.zoom=e.a,this.activeState.x=e.e,this.activeState.y=e.f},X.prototype.pendingUpdate=!1,X.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},X.prototype.updateCTM=function(){var e=this.getCTM();Ac.setCTM(this.viewport,e,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(e)};var Lc=function(e,t){return new X(e,t)},Qo=Ic,gn=$c,te=Ct,Q=pn,_c=Lc,R=function(e,t){this.init(e,t)},Nc={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},Jo={passive:!0},er={passive:!1};R.prototype.init=function(e,t){var n=this;this.svg=e,this.defs=e.querySelector("defs"),Q.setupSvgAttributes(this.svg),this.options=te.extend(te.extend({},Nc),t),this.state="none";var r=Q.getBoundingClientRectNormalized(e);this.width=r.width,this.height=r.height,this.viewport=_c(Q.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(s,a){if(n.viewport&&n.options.beforeZoom)return n.options.beforeZoom(s,a)},onZoom:function(s){if(n.viewport&&n.options.onZoom)return n.options.onZoom(s)},beforePan:function(s,a){if(n.viewport&&n.options.beforePan)return n.options.beforePan(s,a)},onPan:function(s){if(n.viewport&&n.options.onPan)return n.options.onPan(s)},onUpdatedCTM:function(s){if(n.viewport&&n.options.onUpdatedCTM)return n.options.onUpdatedCTM(s)}});var i=this.getPublicInstance();i.setBeforeZoom(this.options.beforeZoom),i.setOnZoom(this.options.onZoom),i.setBeforePan(this.options.beforePan),i.setOnPan(this.options.onPan),i.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&gn.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},R.prototype.setupHandlers=function(){var e=this,t=null;if(this.eventListeners={pointerdown:function(s){if(s.pointerType!=="touch"){var a=e.handleMouseDown(s,t);return t=s,a}},touchstart:function(s){var a=e.handleTouchStart(s,t);return t=s,a},pointerup:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchend:function(s){return e.handleTouchEnd(s)},pointermove:function(s){if(s.pointerType!=="touch")return e.handleMouseMove(s)},touchmove:function(s){return e.handleTouchMove(s)},pointerleave:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},pointercancel:function(s){if(s.pointerType!=="touch")return e.handleMouseUp(s)},touchleave:function(s){return e.handleTouchEnd(s)},touchcancel:function(s){return e.handleTouchEnd(s)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var n=this.options.customEventsHandler.haltEventListeners;if(n&&n.length)for(var r=n.length-1;r>=0;r--)this.eventListeners.hasOwnProperty(n[r])&&delete this.eventListeners[n[r]]}for(var i in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(i,this.eventListeners[i],this.options.preventMouseEventsDefault?er:Jo);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},R.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var e=this;this.wheelListener=function(n){return e.handleMouseWheel(n)};var t=!this.options.preventMouseEventsDefault;Qo.on(this.options.eventsListenerElement||this.svg,this.wheelListener,t),this.options.mouseWheelZoomEnabled=!0}},R.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var e=!this.options.preventMouseEventsDefault;Qo.off(this.options.eventsListenerElement||this.svg,this.wheelListener,e),this.options.mouseWheelZoomEnabled=!1}},R.prototype.handleMouseWheel=function(e){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t=e.deltaY||1,n=Date.now()-this.lastMouseWheelEventTime,r=3+Math.max(0,30-n);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in e&&e.deltaMode===0&&e.wheelDelta&&(t=e.deltaY===0?0:Math.abs(e.wheelDelta)/e.deltaY),t=-.3<t&&t<.3?t:(t>0?1:-1)*Math.log(Math.abs(t)+10)/r;var i=this.svg.getScreenCTM().inverse(),s=Q.getEventPoint(e,this.svg).matrixTransform(i),a=Math.pow(1+this.options.zoomScaleSensitivity,-1*t);this.zoomAtPoint(a,s)}},R.prototype.zoomAtPoint=function(e,t,n){var r=this.viewport.getOriginalState();n?(e=Math.max(this.options.minZoom*r.zoom,Math.min(this.options.maxZoom*r.zoom,e)),e=e/this.getZoom()):this.getZoom()*e<this.options.minZoom*r.zoom?e=this.options.minZoom*r.zoom/this.getZoom():this.getZoom()*e>this.options.maxZoom*r.zoom&&(e=this.options.maxZoom*r.zoom/this.getZoom());var i=this.viewport.getCTM(),s=t.matrixTransform(i.inverse()),a=this.svg.createSVGMatrix().translate(s.x,s.y).scale(e).translate(-s.x,-s.y),l=i.multiply(a);l.a!==i.a&&this.viewport.setCTM(l)},R.prototype.zoom=function(e,t){this.zoomAtPoint(e,Q.getSvgCenterPoint(this.svg,this.width,this.height),t)},R.prototype.publicZoom=function(e,t){t&&(e=this.computeFromRelativeZoom(e)),this.zoom(e,t)},R.prototype.publicZoomAtPoint=function(e,t,n){if(n&&(e=this.computeFromRelativeZoom(e)),te.getType(t)!=="SVGPoint")if("x"in t&&"y"in t)t=Q.createSVGPoint(this.svg,t.x,t.y);else throw new Error("Given point is invalid");this.zoomAtPoint(e,t,n)},R.prototype.getZoom=function(){return this.viewport.getZoom()},R.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},R.prototype.computeFromRelativeZoom=function(e){return e*this.viewport.getOriginalState().zoom},R.prototype.resetZoom=function(){var e=this.viewport.getOriginalState();this.zoom(e.zoom,!0)},R.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},R.prototype.reset=function(){this.resetZoom(),this.resetPan()},R.prototype.handleDblClick=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.options.controlIconsEnabled){var t=e.target.getAttribute("class")||"";if(t.indexOf("svg-pan-zoom-control")>-1)return!1}var n;e.shiftKey?n=1/((1+this.options.zoomScaleSensitivity)*2):n=(1+this.options.zoomScaleSensitivity)*2;var r=Q.getEventPoint(e,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(n,r)},R.prototype.handleMouseDown=function(e,t){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),te.mouseAndTouchNormalize(e,this.svg),this.options.dblClickZoomEnabled&&te.isDblClick(e,t)?this.handleDblClick(e):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=Q.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()))},R.prototype.handleMouseMove=function(e){if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var t=Q.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse()),n=this.firstEventCTM.translate(t.x-this.stateOrigin.x,t.y-this.stateOrigin.y);this.viewport.setCTM(n)}},R.prototype.handleMouseUp=function(e){this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.state==="pan"&&(this.state="none")},R.prototype.handleTouchStart=function(e,t){if(e.touches.length==1)this.handleMouseDown(e,t);else{this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var n=Q.getTouchPoint(e,this.svg,0),r=Q.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(n,r),n.x=(n.x+r.x)/2,n.y=(n.y+r.y)/2,this.stateOrigin=n.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},R.prototype.handleTouchMove=function(e){if(e.touches.length==1)this.handleMouseMove(e);else{if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var t=Q.getTouchPoint(e,this.svg,0),n=Q.getTouchPoint(e,this.svg,1),r=this.svg.createSVGPoint();if(r.x=(t.x+n.x)/2,r.y=(t.y+n.y)/2,this.state==="pan"&&this.options.panEnabled){var i=r.matrixTransform(this.firstEventCTM.inverse()),s=this.firstEventCTM.translate(i.x-this.stateOrigin.x,i.y-this.stateOrigin.y);this.viewport.setCTM(s)}if(this.options.zoomEnabled){var a=te.calculateDistance(t,n),l=a/this.firstDistance,c=this.svg.getScreenCTM().inverse(),d=r.matrixTransform(c);this.zoomAtPoint(this.firstZoomLevel*l,d,!0)}}},R.prototype.handleTouchEnd=function(e){if(e.touches.length==0)this.handleMouseUp(e);else if(this.options.preventMouseEventsDefault&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),e.touches.length==1)this.stateOrigin=Q.getEventPoint(e,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var t=Q.getTouchPoint(e,this.svg,0),n=Q.getTouchPoint(e,this.svg,1);this.firstDistance=te.calculateDistance(t,n),t.x=(t.x+n.x)/2,t.y=(t.y+n.y)/2,this.stateOrigin=t.matrixTransform(this.firstEventCTM.inverse())}},R.prototype.fit=function(){var e=this.viewport.getViewBox(),t=Math.min(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.contain=function(){var e=this.viewport.getViewBox(),t=Math.max(this.width/e.width,this.height/e.height);this.zoom(t,!0)},R.prototype.center=function(){var e=this.viewport.getViewBox(),t=(this.width-(e.width+e.x*2)*this.getZoom())*.5,n=(this.height-(e.height+e.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:t,y:n})},R.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},R.prototype.pan=function(e){var t=this.viewport.getCTM();t.e=e.x,t.f=e.y,this.viewport.setCTM(t)},R.prototype.panBy=function(e){var t=this.viewport.getCTM();t.e+=e.x,t.f+=e.y,this.viewport.setCTM(t)},R.prototype.getPan=function(){var e=this.viewport.getState();return{x:e.x,y:e.y}},R.prototype.resize=function(){var e=Q.getBoundingClientRectNormalized(this.svg);this.width=e.width,this.height=e.height;var t=this.viewport;t.options.width=this.width,t.options.height=this.height,t.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},R.prototype.destroy=function(){var e=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var t in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(t,this.eventListeners[t],this.options.preventMouseEventsDefault?er:Jo);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),Pe=Pe.filter(function(n){return n.svg!==e.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},R.prototype.getPublicInstance=function(){var e=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return e.options.panEnabled=!0,e.pi},disablePan:function(){return e.options.panEnabled=!1,e.pi},isPanEnabled:function(){return!!e.options.panEnabled},pan:function(t){return e.pan(t),e.pi},panBy:function(t){return e.panBy(t),e.pi},getPan:function(){return e.getPan()},setBeforePan:function(t){return e.options.beforePan=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnPan:function(t){return e.options.onPan=t===null?null:te.proxy(t,e.publicInstance),e.pi},enableZoom:function(){return e.options.zoomEnabled=!0,e.pi},disableZoom:function(){return e.options.zoomEnabled=!1,e.pi},isZoomEnabled:function(){return!!e.options.zoomEnabled},enableControlIcons:function(){return e.options.controlIconsEnabled||(e.options.controlIconsEnabled=!0,gn.enable(e)),e.pi},disableControlIcons:function(){return e.options.controlIconsEnabled&&(e.options.controlIconsEnabled=!1,gn.disable(e)),e.pi},isControlIconsEnabled:function(){return!!e.options.controlIconsEnabled},enableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!0,e.pi},disableDblClickZoom:function(){return e.options.dblClickZoomEnabled=!1,e.pi},isDblClickZoomEnabled:function(){return!!e.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return e.enableMouseWheelZoom(),e.pi},disableMouseWheelZoom:function(){return e.disableMouseWheelZoom(),e.pi},isMouseWheelZoomEnabled:function(){return!!e.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(t){return e.options.zoomScaleSensitivity=t,e.pi},setMinZoom:function(t){return e.options.minZoom=t,e.pi},setMaxZoom:function(t){return e.options.maxZoom=t,e.pi},setBeforeZoom:function(t){return e.options.beforeZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},setOnZoom:function(t){return e.options.onZoom=t===null?null:te.proxy(t,e.publicInstance),e.pi},zoom:function(t){return e.publicZoom(t,!0),e.pi},zoomBy:function(t){return e.publicZoom(t,!1),e.pi},zoomAtPoint:function(t,n){return e.publicZoomAtPoint(t,n,!0),e.pi},zoomAtPointBy:function(t,n){return e.publicZoomAtPoint(t,n,!1),e.pi},zoomIn:function(){return this.zoomBy(1+e.options.zoomScaleSensitivity),e.pi},zoomOut:function(){return this.zoomBy(1/(1+e.options.zoomScaleSensitivity)),e.pi},getZoom:function(){return e.getRelativeZoom()},setOnUpdatedCTM:function(t){return e.options.onUpdatedCTM=t===null?null:te.proxy(t,e.publicInstance),e.pi},resetZoom:function(){return e.resetZoom(),e.pi},resetPan:function(){return e.resetPan(),e.pi},reset:function(){return e.reset(),e.pi},fit:function(){return e.fit(),e.pi},contain:function(){return e.contain(),e.pi},center:function(){return e.center(),e.pi},updateBBox:function(){return e.updateBBox(),e.pi},resize:function(){return e.resize(),e.pi},getSizes:function(){return{width:e.width,height:e.height,realZoom:e.getZoom(),viewBox:e.viewport.getViewBox()}},destroy:function(){return e.destroy(),e.pi}}),this.publicInstance};var Pe=[],jc=function(e,t){var n=te.getSvg(e);if(n===null)return null;for(var r=Pe.length-1;r>=0;r--)if(Pe[r].svg===n)return Pe[r].instance.getPublicInstance();return Pe.push({svg:n,instance:new R(n,t)}),Pe[Pe.length-1].instance.getPublicInstance()},Dc=jc;const Zc=Bc(Dc),Rc={getViewArea(){const e=this.getSizes(),t=this.getPan(),n=e.realZoom;t.x/=n,t.y/=n;const r={width:e.width/n,height:e.height/n};return{box:{top:-t.y,bottom:r.height-t.y,left:-t.x,right:r.width-t.x},center:{x:r.width/2-t.x,y:r.height/2-t.y}}},getViewBox(){return this.getViewArea().box},setViewBox(e){const t=e.right-e.left,n=e.bottom-e.top,{width:r,height:i}=this.getSizes(),s=t/n,a=r/i,l=s<a?n*a:t,c=s>a?t/a:n,d=Math.min(r/l,i/c),u=this.getRealZoom(),f=this.getZoom(),h=u/f;this.zoom(d/h);const g={x:(e.left+t/2)*d,y:(e.top+n/2)*d};this.pan({x:-g.x+l/2*d,y:-g.y+c/2*d})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(e,t,n){const r=Math.max(1e-4,t),i=Math.max(r,n),s=Math.max(Math.min(i,e),r),a=this.getRealZoom(),l=this.getZoom(),c=a/l;this.setMinZoom(r/c).setMaxZoom(i/c).zoom(s/c)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(e){return e?this.enablePan():this.disablePan(),this},setZoomEnabled(e){return e?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function Vc(e,t){var r,i;const n=e;return n._isPanEnabled=(r=t.panEnabled)!=null?r:!0,n._isZoomEnabled=(i=t==null?void 0:t.zoomEnabled)!=null?i:!0,n._internalIsPanEnabled=n.isPanEnabled,n._internalEnablePan=n.enablePan,n._internalDisablePan=n.disablePan,n._internalIsZoomEnabled=n.isZoomEnabled,n._internalEnableZoom=n.enableZoom,n._internalDisableZoom=n.disableZoom,Object.assign(e,Rc),n}function Hc(e,t){var s,a,l,c,d,u;const n=(a=(s=t.customEventsHandler)==null?void 0:s.init)!=null?a:f=>{},r=(c=(l=t.customEventsHandler)==null?void 0:l.destroy)!=null?c:f=>{},i=(u=(d=t.customEventsHandler)==null?void 0:d.haltEventListeners)!=null?u:[];return t.mouseWheelZoomEnabled===void 0&&(t.mouseWheelZoomEnabled=t.zoomEnabled),t.customEventsHandler={init:f=>{Vc(f.instance,t),n(f)},destroy:f=>r(f),haltEventListeners:i},Zc(e,t)}function Fc(e,t){const n=o.ref();let r=0;const i=[],s=[],a=()=>{r=1,i.forEach(u=>u()),i.length=0},l=()=>{r=2,s.forEach(u=>u()),s.length=0};return o.onMounted(()=>{var k,w,m,v,x,y;const u=Z(e.value,"<svg>"),f=(w=(k=t.customEventsHandler)==null?void 0:k.init)!=null?w:p=>{},h=(v=(m=t.customEventsHandler)==null?void 0:m.destroy)!=null?v:p=>{},g=(y=(x=t.customEventsHandler)==null?void 0:x.haltEventListeners)!=null?y:[];t.customEventsHandler={init:p=>{n.value=p.instance,f(p),a()},destroy:p=>{l(),h(p)},haltEventListeners:g};const E=()=>{const p=u.getBoundingClientRect();p.width!==0&&p.height!==0?Hc(u,t):setTimeout(E,200)};E()}),o.onUnmounted(()=>{var u;(u=n.value)==null||u.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:u=>{r===0?i.push(u):r===1&&u()},onSvgPanZoomUnmounted:u=>{r===0||r===1?s.push(u):u()}}}const tr=Symbol("zoomLevel");function Wc(e,t){const n=o.computed(()=>t.scalingObjects?1:1/e.value);return o.provide(tr,{zoomLevel:e,scale:n}),{scale:n}}function re(){return Z(o.inject(tr),"zoomLevel")}function Uc(e){return e instanceof Promise||e&&typeof e.then=="function"}function Gc(){let e=null;const t=o.ref({enabled:!1,duration:300,timingFunction:"linear"});function n(r,i=300,s="linear"){e&&(clearTimeout(e),e=null),t.value={enabled:!0,duration:i,timingFunction:s},o.nextTick(()=>ue(this,null,function*(){const a=r();Uc(a)&&(yield a),e&&clearTimeout(e),e=window==null?void 0:window.setTimeout(()=>{t.value.enabled=!1,e=null},i)}))}return{transitionWhile:n,transitionOption:t}}function Xc(e){const t=o.ref({}),n=o.ref(!1);let r=1;const i=new Map;return o.watchEffect(()=>{if(e.value instanceof Array){const s=new Set([]);if(t.value=Object.fromEntries(e.value.map(a=>{let l=a.id;return l||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),l=i.get(a),l||(l="path-"+r++,i.set(a,l))),s.add(l),[l,a]})),n.value)for(const[a,l]of Array.from(i.entries()))s.has(l)||i.delete(a)}else t.value=e.value}),{objects:t,isInCompatibilityModeForPath:n}}function qc(e,t,n,r){if(r){const s=o.ref(r(e[t])),a=l=>{Ee(l,s.value)||(s.value=l),Ee(l,e[t])||n(`update:${t}`,l)};return o.watch(()=>r(s.value),a),o.watch(()=>e[t],l=>a(r(l))),s.value!==e[t]&&n(`update:${t}`,s.value),s}const i=o.ref(e[t]);return o.watch(()=>e[t],s=>{Ee(s,i.value)||(i.value=s)}),o.watch(i,s=>{Ee(s,e[t])||n(`update:${t}`,s)}),i}function mn(e,t,n,r){const i=o.reactive(new Set);return o.watch(()=>e[t],()=>{const a=e[t].filter(l=>l in n.value);Ee(a,Array.from(i))||(i.clear(),a.forEach(i.add,i))},{deep:!0,immediate:!0}),o.watch(i,()=>{const s=Array.from(i);Ee(e[t],s)||r(`update:${t}`,s)}),de(i)}const nr=Symbol("selection");function Kc(e,t,n){o.provide(nr,{selectedNodes:e,selectedEdges:t,selectedPaths:n})}function Yc(){return Z(o.inject(nr),"Selections")}const or=Symbol("layouts");function Qc(e){o.provide(or,e)}function bn(){return Z(o.inject(or),"Layouts")}function Jc(e,t){for(let n=0;n<e.length-1;n++)t(e[n],e[n+1])}function et(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function eu(e,t,n){const r=e.indexOf(t);r<0||e.splice(r+1,0,n)}function tu(e,t){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return o.computed(()=>{const r=vl(e.view.builtInLayerOrder).filter(s=>{const a=n.includes(s);return a||console.warn(`Layer ${s} is not a built-in layer.`),a}).reverse(),i=[...n];return Jc(r,(s,a)=>{et(i,a),eu(i,s,a)}),"edge-label"in t||"edges-label"in t||et(i,"edge-labels"),e.node.focusring.visible||et(i,"focusring"),e.node.label.visible===!1&&et(i,"node-labels"),e.path.visible||et(i,"paths"),i})}const rr=()=>new Promise(e=>o.nextTick(e));function nu(e,t){const n=Math.max(e.width,e.height,t.width,t.height)/1e4;return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n&&Math.abs(e.width-t.width)<n&&Math.abs(e.height-t.height)<n}function ou(e,t){return{top:e.top+t.top,left:e.left+t.left,right:e.right+t.right,bottom:e.bottom+t.bottom}}function ru(e,t){return{top:e.top*t,left:e.left*t,right:e.right*t,bottom:e.bottom*t}}function iu(e,t){return{top:e.top/t,left:e.left/t,right:e.right/t,bottom:e.bottom/t}}function ir(e){return{top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function sr(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function su(e,t){return{top:Math.min(e.top,t.top),left:Math.min(e.left,t.left),right:Math.max(e.right,t.right),bottom:Math.max(e.bottom,t.bottom)}}const au=new RegExp("^\\d+$");function lu(e,t){let n={top:0,left:0,right:0,bottom:0};if(typeof e=="string"){const r=Ze(e,t.width),i=Ze(e,t.height);r===void 0||i===void 0?console.warn("Invalid `fitContentMargin` value.",e):n={top:i,left:r,right:r,bottom:i}}else if(typeof e=="number"){const r=e;n={top:r,left:r,right:r,bottom:r}}else{if(e.top){const r=Ze(e.top,t.height);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.top):n.top=r}if(e.left){const r=Ze(e.left,t.width);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.left):n.left=r}if(e.right){const r=Ze(e.right,t.width);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.right):n.right=r}if(e.bottom){const r=Ze(e.bottom,t.height);r===void 0?console.warn("Invalid `fitContentMargin` value.",e.bottom):n.bottom=r}}return n}function cu(e,t,n,r,i,s){const a=e.getBBox();if(s)return du(a,t,n,i);{const l=uu(e);return fu(a,l,t,n,r,i)}}function Ze(e,t){if(typeof e=="string"){if(e.endsWith("%")){const n=parseInt(e.toString());if(Number.isFinite(n))return t*(n/100)}else if(e.endsWith("px")||au.test(e)){const n=parseInt(e.toString());if(Number.isFinite(n))return n}}else if(typeof e=="number")return e}function uu(e){return Array.from(e.querySelectorAll(".v-ng-graph-objects")).map(n=>n.getBBox()).reduce((n,r,i)=>{if(i===0)return r;const s=Math.min(n.x,r.x),a=Math.min(n.y,r.y);return{x:s,y:a,width:Math.max(n.x+n.width-s,r.x+r.width-s),height:Math.max(n.y+n.height-a,r.y+r.height-a)}},{x:0,y:0,width:0,height:0})}function du(e,t,n,r){if(Object.keys(n).length<=1)return;const i=ar(e,t,r);if(i>0){const s=ir(e);return{zoom:i,pos:lr(s,i,t,r)}}else return}function fu(e,t,n,r,i,s){if(Object.keys(r).length<=1)return;const a=Hl(r),l={top:(a.top-t.y)*i,left:(a.left-t.x)*i,right:(t.x+t.width-a.right)*i,bottom:(t.y+t.height-a.bottom)*i};let c=ar(e,n,s);if(c===0)return;const d=Ot(n,ou(s,l));if(d.width<=0||d.height<=0)return;const u=ir(e),f=Ot(n,s),h=nu(e,t);let g=0,E=0,k={top:0,left:0,right:0,bottom:0};do{E=c;const w=iu(l,c),m={top:a.top-w.top,left:a.left-w.left,right:a.right+w.right,bottom:a.bottom+w.bottom};k=h?m:su(u,m);const v=sr(k),y=[f.width/v.width,f.height/v.height].filter(p=>p>0);if(y.length===0)return;c=Math.min(...y),g++}while(Math.abs(E-c)>1e-6&&g<10);return{zoom:c,pos:lr(k,c,n,s)}}function ar(e,t,n){if(e.width===0||e.height===0)return 0;const r=Ot(t,n);if(r.width<=0||r.height<=0)return 0;const i=[r.width/e.width,r.height/e.height];return Math.min(...i)}function lr(e,t,n,r){const i=Ot(n,r),s=sr(ru(e,t)),a=(i.width-s.width)/2,l=(i.height-s.height)/2,c=s.x-r.left,d=s.y-r.top;return{x:-c+a,y:-d+l}}function Ot(e,t){const n=t.left+t.right,r=t.top+t.bottom;return{width:e.width-n,height:e.height-r}}const hu=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],pu=o.defineComponent({__name:"VSelectionBox",props:{box:null,config:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,hu))}}),gu=["points","fill"],mu=o.defineComponent({__name:"VMarkerHeadArrow",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>{const r=t.width,i=t.height;return t.isSource?`${r} ${i}, 0 ${i/2}, ${r} 0`:`0 0, ${r} ${i/2}, 0 ${i}`});return(r,i)=>(o.openBlock(),o.createElementBlock("polygon",{points:o.unref(n),fill:e.color},null,8,gu))}}),bu=["points","stroke-width","stroke"],yu=o.defineComponent({__name:"VMarkerHeadAngle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){const t=e,n=o.computed(()=>t.units==="strokeWidth"?1:Math.min(t.width,t.height)/5),r=o.computed(()=>{const i=n.value/2,s=t.width,a=t.height;return t.isSource?`${s-i} ${a-i}, ${i} ${a/2}, ${s-i} ${i}`:`${i} ${i}, ${s-i} ${a/2}, ${i} ${a-i}`});return(i,s)=>(o.openBlock(),o.createElementBlock("polyline",{points:o.unref(r),fill:"none","stroke-width":o.unref(n),stroke:e.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,bu))}}),vu=["fill","cx","cy","rx","ry"],wu=o.defineComponent({__name:"VMarkerHeadCircle",props:{width:null,height:null,refX:null,color:null,isSource:{type:Boolean},units:null},setup(e){return(t,n)=>(o.openBlock(),o.createElementBlock("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,vu))}}),Eu=["id","markerWidth","markerHeight","refX","refY","markerUnits"],ku=o.defineComponent({__name:"VMarkerHead",props:{id:null,marker:null,scale:null},setup(e){const t=e,n={arrow:mu,angle:yu,circle:wu},r=o.computed(()=>t.marker.width*(t.marker.units==="strokeWidth"?1:t.scale)),i=o.computed(()=>t.marker.height*(t.marker.units==="strokeWidth"?1:t.scale)),s=o.computed(()=>{const l=t.marker.margin*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?r.value+l:-l}),a=o.computed(()=>{const l=t.marker.offset*(t.marker.units==="strokeWidth"?1:t.scale);return t.marker.isSource?l:-l});return(l,c)=>e.marker.type!=="none"&&e.marker.type!=="custom"?(o.openBlock(),o.createElementBlock("marker",{key:0,id:e.id,markerWidth:o.unref(r),markerHeight:o.unref(i),refX:o.unref(s),refY:o.unref(i)/2+o.unref(a),orient:"auto",markerUnits:e.marker.units,class:"v-ng-marker"},[(o.openBlock(),o.createBlock(o.resolveDynamicComponent(n[e.marker.type]),{width:o.unref(r),height:o.unref(i),refX:o.unref(s),color:e.marker.color,"is-source":e.marker.isSource,units:e.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Eu)):o.createCommentVNode("",!0)}}),xu={class:"v-ng-background-grid","shape-rendering":"crispEdges"},Pu=["d"],Su=["d"],Mu=["d"],Cu=["d"],Tu=o.defineComponent({__name:"VBackgroundGrid",setup(e){const{container:t,svgPanZoom:n}=Me(),{zoomLevel:r}=re(),i=Oc(),s=Ml(),a=o.ref({x:0,y:0}),l=o.ref({width:500,height:500});o.onMounted(()=>{var E;const h=(E=n.value)==null?void 0:E.getPan();h&&(a.value={x:-h.x,y:-h.y});const g=t.value.getBoundingClientRect();l.value={width:g.width,height:g.height}}),i.on("view:resize",h=>{l.value={width:h.width,height:h.height}}),i.on("view:pan",h=>{a.value={x:-h.x,y:-h.y}}),i.on("view:zoom",()=>{var g;const h=(g=n.value)==null?void 0:g.getPan();h&&(a.value={x:-h.x,y:-h.y})});const c=o.ref([]),d=o.ref([]),u=o.ref([]),f=o.ref([]);return o.watchEffect(()=>{const h=[],g=[],E=[],k=[],w=1/r.value,m=s.grid.interval,v=a.value.x*w,x=a.value.y*w,y=Math.floor(l.value.width/m+1)*m,p=Math.floor(l.value.height/m+1)*m,b=(a.value.x+y)*w,S=(a.value.y+p)*w,M=s.grid.thickIncrements,O=s.grid.line.dasharray,C=s.grid.thick.dasharray;let T={stroke:s.grid.thick.color,"stroke-width":s.grid.thick.width,"stroke-dasharray":C,"stroke-dashoffset":C?v/w:void 0},z={stroke:s.grid.line.color,"stroke-width":s.grid.line.width,"stroke-dasharray":O,"stroke-dashoffset":O?v/w:void 0};const N=(a.value.x+y)*w;for(let _=x;_<=S;_+=m){const V=Math.floor(_/m);M&&V%M===0?h.push([V,V*m,v,N,T]):E.push([V,V*m,v,N,z])}T=Y({},T),T["stroke-dashoffset"]=C?x/w:void 0,z=Y({},z),z["stroke-dashoffset"]=O?x/w:void 0;const W=(a.value.y+p)*w;for(let _=v;_<=b;_+=m){const V=Math.floor(_/m);M&&V%M===0?g.push([V,V*m,x,W,T]):k.push([V,V*m,x,W,z])}d.value=h,c.value=g,f.value=E,u.value=k}),(h,g)=>(o.openBlock(),o.createElementBlock("g",xu,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(f.value,([E,k,w,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nv${E}`,d:`M ${w} ${k} L ${m} ${k}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Pu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(u.value,([E,k,w,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`nh${E}`,d:`M ${k} ${w} L ${k} ${m}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Su))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(d.value,([E,k,w,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`tv${E}`,d:`M ${w} ${k} L ${m} ${k}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Mu))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.value,([E,k,w,m,v])=>(o.openBlock(),o.createElementBlock("path",o.mergeProps({key:`th${E}`,d:`M ${k} ${w} L ${k} ${m}`},v,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Cu))),128))]))}}),Ou=o.defineComponent({__name:"VBackgroundViewport",setup(e){const{viewport:t}=Me(),n=o.ref(),r=(s,a,l)=>{s.forEach(c=>{var d;return a.setAttribute(c,(d=l.getAttribute(c))!=null?d:"")})},i=new MutationObserver(s=>{if(!n.value)return;const a=s.map(l=>{var c;return(c=l.attributeName)!=null?c:""}).filter(Boolean);r(a,n.value,t.value)});return o.onMounted(()=>{const s=["transform","style"];i.observe(t.value,{attributes:!0,attributeFilter:s}),n.value&&r(s,n.value,t.value)}),o.onUnmounted(()=>{i.disconnect()}),(s,a)=>(o.openBlock(),o.createElementBlock("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[o.renderSlot(s.$slots,"default")],512))}}),Bu=["d","stroke-width"],zu=o.defineComponent({__name:"VEdgeBackground",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=yt(),{handleEdgePointerDownEvent:i,handleEdgePointerOverEvent:s,handleEdgePointerOutEvent:a,handleEdgeClickEvent:l,handleEdgeDoubleClickEvent:c,handleEdgeContextMenu:d}=Je(),u=o.computed(()=>{const h=t.state.position;if(t.state.loop){const{radius:g,isLargeArc:E,isClockwise:k}=t.state.loop,[w,m]=g,v=E?1:0,x=k?1:0;return`M ${h.p1.x} ${h.p1.y} A ${w} ${m} 0 ${v} ${x} ${h.p2.x} ${h.p2.y}`}else{if(r.type==="straight"||!t.state.curve)return`M ${h.p1.x} ${h.p1.y} L ${h.p2.x} ${h.p2.y}`;{const g=[...t.state.curve.control,{x:h.p2.x,y:h.p2.y}],E=[];return E.push(`M ${h.p1.x} ${h.p1.y}`),Dt(g,2).forEach(([k,w])=>E.push(`Q ${k.x} ${k.y} ${w.x} ${w.y}`)),E.join(" ")}}}),f=o.computed(()=>(t.state.line.stroke.width+10)*n.value);return(h,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line-background":!0,selectable:e.state.selectable}),d:o.unref(u),stroke:"transparent","stroke-width":o.unref(f),fill:"none",onPointerdown:g[0]||(g[0]=o.withModifiers(E=>o.unref(i)(e.id,E),["stop"])),onPointerenterPassive:g[1]||(g[1]=E=>o.unref(s)(e.id,E)),onPointerleavePassive:g[2]||(g[2]=E=>o.unref(a)(e.id,E)),onClick:g[3]||(g[3]=o.withModifiers(E=>o.unref(l)(e.id,E),["stop"])),onDblclick:g[4]||(g[4]=o.withModifiers(E=>o.unref(c)(e.id,E),["stop"])),onContextmenu:g[5]||(g[5]=E=>o.unref(d)(e.id,E))},null,42,Bu))}}),Iu=o.defineComponent({__name:"VEdgeBackgrounds",setup(e){const{edgeStates:t,edgeGroupStates:n,layouts:r}=ce();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n).edgeGroups,({summarize:a,edges:l})=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[a?o.createCommentVNode("",!0):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(l,(c,d)=>(o.openBlock(),o.createBlock(zu,{key:d,id:d,state:o.unref(t)[d],"source-pos":o.unref(r).nodes[c.source],"target-pos":o.unref(r).nodes[c.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),$u=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],cr=o.defineComponent({__name:"VLine",props:{p1:null,p2:null,config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>qe(t.config.dasharray,n.value)),s=o.computed(()=>{const a=t.config.animate?gt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return a?{"--animation-speed":a}:void 0});return(a,l)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:`M ${e.p1.x} ${e.p1.y} L ${e.p2.x} ${e.p2.y}`,stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s))},null,14,$u))}}),Au=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Lu=o.defineComponent({__name:"VArc",props:{p1:null,p2:null,radius:null,isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>t.config.width*n.value),i=o.computed(()=>qe(t.config.dasharray,n.value)),s=o.computed(()=>{const l=t.config.animate?gt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0}),a=o.computed(()=>{const{p1:l,p2:c,radius:d,isLargeArc:u,isClockwise:f}=t,[h,g]=d,E=u?1:0,k=f?1:0;return`M ${l.x} ${l.y} A ${h} ${g} 0 ${E} ${k} ${c.x} ${c.y}`});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(a),stroke:e.config.color,"stroke-width":o.unref(r),"stroke-dasharray":o.unref(i),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(s)),fill:"none"},null,14,Au))}}),_u=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],Nu=o.defineComponent({__name:"VEdgeCurved",props:{state:null,config:null,markerStart:{default:void 0},markerEnd:{default:void 0}},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var u,f;const l=t.state.position,c=[...(f=(u=t.state.curve)==null?void 0:u.control)!=null?f:[],{x:l.p2.x,y:l.p2.y}],d=[];return d.push(`M ${l.p1.x} ${l.p1.y}`),Dt(c,2).forEach(([h,g])=>d.push(`Q ${h.x} ${h.y} ${g.x} ${g.y}`)),d.join(" ")}),i=o.computed(()=>t.config.width*n.value),s=o.computed(()=>qe(t.config.dasharray,n.value)),a=o.computed(()=>{const l=t.config.animate?gt(t.config.dasharray)*t.config.animationSpeed*n.value:!1;return l?{"--animation-speed":l}:void 0});return(l,c)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-line":!0,animate:e.config.animate}),d:o.unref(r),fill:"none",stroke:e.config.color,"stroke-width":o.unref(i),"stroke-dasharray":o.unref(s),"stroke-linecap":e.config.linecap,style:o.normalizeStyle(o.unref(a)),"marker-start":e.markerStart,"marker-end":e.markerEnd},null,14,_u))}}),ju=o.defineComponent({__name:"VEdge",props:{id:null,state:null,sourcePos:{default:void 0},targetPos:{default:void 0}},setup(e){const t=yt();return(n,r)=>e.state.loop?(o.openBlock(),o.createBlock(Lu,o.mergeProps({key:0},e.state.position,{radius:e.state.loop.radius,"is-large-arc":e.state.loop.isLargeArc,"is-clockwise":e.state.loop.isClockwise,class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):o.unref(t).type=="straight"||!e.state.curve?(o.openBlock(),o.createBlock(cr,o.mergeProps({key:1,"data-edge-id":e.id},e.state.position,{class:[{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"],config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(o.openBlock(),o.createBlock(Nu,{key:2,"data-edge-id":e.id,class:o.normalizeClass([{selectable:e.state.selectable,hover:e.state.hovered,selected:e.state.selected},"v-ng-edge"]),state:e.state,config:e.state.line.stroke,"marker-start":e.state.sourceMarkerId?`url('#${e.state.sourceMarkerId}')`:void 0,"marker-end":e.state.targetMarkerId?`url('#${e.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),Du=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],Zu=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],tt=o.defineComponent({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:null},setup(e){const t=e,{scale:n}=re(),r=o.ref(t.baseX),i=o.ref(t.baseY),s=o.ref(0),a=o.ref("#000000"),l=o.ref(void 0),c=o.ref(0),d=o.ref(0),u=o.ref(0),f=o.ref(0);return o.watchEffect(()=>{var g;const h=n.value;s.value=t.config.strokeWidth*h,a.value=(g=t.config.strokeColor)!=null?g:"none",l.value=qe(t.config.strokeDasharray,h),t.config.type==="circle"?(r.value=t.baseX,i.value=t.baseY,c.value=t.config.radius*h):(d.value=t.config.width*h,u.value=t.config.height*h,f.value=t.config.borderRadius*h,r.value=t.baseX-d.value/2,i.value=t.baseY-u.value/2)}),(h,g)=>e.config.type==="circle"?(o.openBlock(),o.createElementBlock("circle",{key:0,class:"v-ng-shape-circle",cx:r.value,cy:i.value,r:c.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Du)):(o.openBlock(),o.createElementBlock("rect",{key:1,class:"v-ng-shape-rect",x:r.value,y:i.value,width:d.value,height:u.value,rx:f.value,ry:f.value,fill:e.config.color,stroke:a.value,"stroke-width":s.value,"stroke-dasharray":l.value},null,8,Zu))}}),Ru=["rx","ry","fill","transform"],Vu=["x","y","dominant-baseline","font-family","font-size","fill"],Hu=["x","dy","dominant-baseline"],nt=o.defineComponent({__name:"VLabelText",props:{text:null,x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:null},setup(e){const t=e,n=o.useAttrs(),{scale:r}=re(),i=o.computed(()=>{var w,m;return(m=(w=t.text)==null?void 0:w.toString().split(/\r?\n/))!=null?m:""}),s=o.computed(()=>{var w;return(w=n["font-size"])!=null?w:t.config.fontSize*r.value}),a=o.computed(()=>s.value*t.config.lineHeight),l=o.computed(()=>{const w=t.dominantBaseline;return w==="hanging"?0:w==="central"?-(a.value*(i.value.length-1))/2:-a.value*(i.value.length-1)}),c=o.ref(),d=o.ref(""),u=o.reactive({x:0,y:0,width:0,height:0}),f=o.computed(()=>{var y,p;const w=t.config.background;if(!w)return u;let m,v;w.padding instanceof Object?(m=w.padding.vertical,v=w.padding.horizontal):(m=(y=w.padding)!=null?y:0,v=(p=w.padding)!=null?p:0);const x=a.value-s.value;return{x:u.x-v*r.value,y:u.y-m*r.value-x/2,width:u.width+v*2*r.value,height:u.height+m*2*r.value+x}});let h;const g=()=>{t.config.background&&t.config.background.visible?!h&&c.value&&(h=k(c.value,u,d)):(h==null||h.disconnect(),h=void 0)};o.onMounted(()=>g()),o.watch(()=>t.config.background&&t.config.background.visible,(w,m)=>{w!=m&&g()}),o.onUnmounted(()=>{h==null||h.disconnect(),h=void 0});function E(w,m,v){var y;const x=w.getBBox();m.x=x.x,m.y=x.y,m.width=x.width,m.height=x.height,v.value=(y=w.getAttribute("transform"))!=null?y:void 0}function k(w,m,v){const x=new MutationObserver(()=>{E(w,m,v)});return x.observe(w,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),E(w,m,v),x}return(w,m)=>{var v,x,y,p,b,S;return o.openBlock(),o.createElementBlock(o.Fragment,null,[e.config.background&&e.config.background.visible?(o.openBlock(),o.createElementBlock("rect",o.mergeProps({key:0,class:"v-ng-text-background"},o.unref(f),{rx:((x=(v=e.config.background)==null?void 0:v.borderRadius)!=null?x:0)*o.unref(r),ry:((p=(y=e.config.background)==null?void 0:y.borderRadius)!=null?p:0)*o.unref(r),fill:(S=(b=e.config.background)==null?void 0:b.color)!=null?S:"#ffffff",transform:d.value}),null,16,Ru)):o.createCommentVNode("",!0),o.createElementVNode("text",o.mergeProps({ref_key:"element",ref:c,class:"v-ng-text"},w.$attrs,{x:e.x,y:e.y,"dominant-baseline":e.dominantBaseline,"font-family":w.$attrs["font-family"]?`${w.$attrs["font-family"]}`:e.config.fontFamily,"font-size":o.unref(s),fill:w.$attrs.fill?`${w.$attrs.fill}`:e.config.color}),[o.unref(i).length<=1?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[o.createTextVNode(o.toDisplayString(e.text),1)],64)):(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(i),(M,O)=>(o.openBlock(),o.createElementBlock("tspan",{key:O,x:e.x,dy:O==0?o.unref(l):o.unref(a),"dominant-baseline":e.dominantBaseline},o.toDisplayString(M),9,Hu))),128))],16,Vu)],64)}}}),Fu=o.defineComponent({__name:"VEdgeSummarized",props:{edges:null,layouts:null},setup(e){const t=e,n=yt(),{handleEdgesPointerDownEvent:r,handleEdgesPointerOverEvent:i,handleEdgesPointerOutEvent:s,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:l,handleEdgesContextMenu:c}=Je(),{edgeStates:d}=ce(),u=o.ref({p1:{x:0,y:0},p2:{x:0,y:0}}),f=o.ref({x:0,y:0});o.watchEffect(()=>{const x=Object.keys(t.edges).find(y=>y in d);x&&(u.value=d[x].position,f.value={x:(u.value.p1.x+u.value.p2.x)/2,y:(u.value.p1.y+u.value.p2.y)/2})});const h=o.computed(()=>Object.keys(t.edges)),g=o.computed(()=>B.values(n.summarized.label,t.edges)),E=o.computed(()=>B.values(n.summarized.shape,t.edges)),k=o.computed(()=>B.values(n.summarized.stroke,t.edges)),w=o.computed(()=>h.value.some(x=>d[x].hovered)),m=o.computed(()=>h.value.some(x=>d[x].selectable)),v=o.computed(()=>h.value.some(x=>d[x].selected));return(x,y)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-line-summarized":!0,hovered:o.unref(w),selectable:o.unref(m),selected:o.unref(v)}),onPointerdown:y[0]||(y[0]=o.withModifiers(p=>o.unref(r)(o.unref(h),p),["stop"])),onPointerenterPassive:y[1]||(y[1]=p=>o.unref(i)(o.unref(h),p)),onPointerleavePassive:y[2]||(y[2]=p=>o.unref(s)(o.unref(h),p)),onClick:y[3]||(y[3]=o.withModifiers(p=>o.unref(a)(o.unref(h),p),["stop"])),onDblclick:y[4]||(y[4]=o.withModifiers(p=>o.unref(l)(o.unref(h),p),["stop"])),onContextmenu:y[5]||(y[5]=p=>o.unref(c)(o.unref(h),p))},[o.createVNode(cr,o.mergeProps(u.value,{config:o.unref(k),"data-edge-id":o.unref(h)[0]}),null,16,["config","data-edge-id"]),o.createVNode(tt,{"base-x":f.value.x,"base-y":f.value.y,config:o.unref(E)},null,8,["base-x","base-y","config"]),o.createVNode(nt,{text:Object.keys(e.edges).length.toString(),x:f.value.x,y:f.value.y,config:o.unref(g),"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),Wu={class:"v-ng-edge-overlay"},ur=o.defineComponent({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:null,isSummarized:{type:Boolean}},setup(e){const t=e,{svg:n}=Me(),{scale:r}=re(),i=yt();function s(){return t.isSummarized?B.values(i.summarized.stroke,t.edges):t.state.line.stroke}function a(u){return{source:u.p1,target:u.p2}}function l(u){if(u.curve)return u.curve.center;{const f=u.origin.p1,h=u.origin.p2;return{x:(f.x+h.x)/2,y:(f.y+h.y)/2}}}function c(){var h;if(!n.value)return 0;const u=(h=t.edgeId)!=null?h:Object.keys(t.edges)[0],f=n.value.querySelector(`path[data-edge-id="${u}"]`);return f?f.getTotalLength():0}function d(u){var E;if(!n.value||!isFinite(u))return t.state.position.p1;t.state;const f=(E=t.edgeId)!=null?E:Object.keys(t.edges)[0],h=n.value.querySelector(`path[data-edge-id="${f}"]`);if(!h)return t.state.position.p1;const g=h.getPointAtLength(u);return{x:g.x,y:g.y}}return(u,f)=>(o.openBlock(),o.createElementBlock("g",Wu,[e.isSummarized?o.renderSlot(u.$slots,"default",{key:0,edges:e.edges,isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d}):o.renderSlot(u.$slots,"default",{key:1,edgeId:e.edgeId,edge:e.edge,edges:{[e.edgeId]:e.edge},isSummarized:e.isSummarized,stroke:s(),position:a(e.state.origin),center:l(e.state),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(r),length:c(),pointAtLength:d})]))}}),Uu=o.defineComponent({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(e){const{edgeStates:t,edgeZOrderedList:n,layouts:r}=ce();return(i,s)=>(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createElementBlock(o.Fragment,null,[o.unref(oc)(a)?(o.openBlock(),o.createElementBlock(o.Fragment,{key:0},[(o.openBlock(),o.createBlock(Fu,{key:a.key,edges:a.group.edges,layouts:o.unref(r).nodes},null,8,["edges","layouts"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(ur,{key:a.key,edges:a.group.edges,state:o.unref(t)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edges","state"])):o.createCommentVNode("",!0)],64)):(o.openBlock(),o.createElementBlock(o.Fragment,{key:1},[(o.openBlock(),o.createBlock(ju,{id:a.key,key:a.key,state:o.unref(t)[a.key],"source-pos":o.unref(r).nodes[a.edge.source],"target-pos":o.unref(r).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),e.hasEdgeOverlaySlot?(o.openBlock(),o.createBlock(ur,{key:a.key,"edge-id":a.key,edge:a.edge,state:o.unref(t)[a.key],"is-summarized":!1},{default:o.withCtx(l=>[o.renderSlot(i.$slots,"default",o.normalizeProps(o.guardReactiveProps(l)))]),_:2},1032,["edge-id","edge","state"])):o.createCommentVNode("",!0)],64))],64))),256))}}),Gu={class:"v-ng-layer-edges v-ng-graph-objects"},Xu=o.defineComponent({__name:"VEdgesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"edge-overlay"in t);return(r,i)=>(o.openBlock(),o.createElementBlock("g",Gu,[o.createVNode(Iu),o.createVNode(Uu,{"has-edge-overlay-slot":o.unref(n)},o.createSlots({_:2},[o.unref(n)?{name:"default",fn:o.withCtx(s=>[o.renderSlot(r.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(s)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),qu=o.defineComponent({__name:"VEdgeLabelPlace",props:{edgeId:null,edge:null,state:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>Lo(t.state.labelPosition,t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value));return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edgeId:e.edgeId,edge:e.edge,config:e.state.label,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),Ku=o.defineComponent({__name:"VEdgeLabelsPlace",props:{edges:null,state:null,summarizeState:null},setup(e){const t=e,{scale:n}=re(),r=o.computed(()=>{var i,s;return Lo(t.state.labelPosition,(s=(i=t.summarizeState)==null?void 0:i.stroke)!=null?s:t.state.line.stroke,t.state.label.margin,t.state.label.padding,n.value)});return(i,s)=>e.state.loop?o.createCommentVNode("",!0):o.renderSlot(i.$slots,"default",{key:0,edges:e.edges,config:e.state.label,area:o.unref(r),hovered:e.state.hovered,selected:e.state.selected,scale:o.unref(n)})}}),Yu={class:"v-ng-edge-labels"},Qu=o.defineComponent({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){const{edgeStates:t,edgeGroupStates:n,summarizedEdgeStates:r}=ce(),i=o.computed(()=>{const a={},l={};return Object.entries(n.edgeGroups).forEach(([c,d])=>{Object.keys(d.edges).length>0&&(d.summarize?l[c]=d:a[c]=d)}),{individual:a,summarized:l}});function s(a){return Object.keys(a.edges)[0]}return(a,l)=>(o.openBlock(),o.createElementBlock("g",Yu,[e.enableEdgeLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:0},o.renderList(o.unref(i).individual,(c,d)=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:d},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(c.edges,(u,f)=>(o.openBlock(),o.createBlock(qu,{key:f,"edge-id":f,edge:u,state:o.unref(t)[f]},{default:o.withCtx(h=>[o.renderSlot(a.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(h)))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):o.createCommentVNode("",!0),e.enableEdgesLabel?(o.openBlock(!0),o.createElementBlock(o.Fragment,{key:1},o.renderList(o.unref(i).summarized,(c,d)=>(o.openBlock(),o.createBlock(Ku,{key:d,edges:c.edges,state:o.unref(t)[s(c)],"summarize-state":o.unref(r)[s(c)]},{default:o.withCtx(u=>[o.renderSlot(a.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(u)))]),_:2},1032,["edges","state","summarize-state"]))),128)):o.createCommentVNode("",!0)]))}}),Ju=o.defineComponent({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(e){return(t,n)=>(o.openBlock(),o.createBlock(Qu,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels v-ng-graph-objects"},o.createSlots({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:o.withCtx(r=>[o.renderSlot(t.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(r)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),ed=o.defineComponent({__name:"VNodeFocusRing",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.x)||0}),r=o.computed(()=>{var a;return((a=t.pos)==null?void 0:a.y)||0}),i=bt(),s=o.reactive({});return o.watchEffect(()=>{var l,c,d;const a=t.state.shape;if(a.type==="circle"){const u={type:"circle",radius:a.radius+((l=a.strokeWidth)!=null?l:0)/2+i.focusring.padding+i.focusring.width/2,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}else{const u={type:"rect",width:a.width+((c=a.strokeWidth)!=null?c:0)+i.focusring.padding*2+i.focusring.width,height:a.height+((d=a.strokeWidth)!=null?d:0)+i.focusring.padding*2+i.focusring.width,borderRadius:a.borderRadius>0?a.borderRadius+i.focusring.padding:0,color:"none",strokeWidth:i.focusring.width,strokeColor:i.focusring.color,strokeDasharray:i.focusring.dasharray};Object.assign(s,u)}}),(a,l)=>(o.openBlock(),o.createBlock(tt,{class:"v-ng-node-focusring","base-x":o.unref(n),"base-y":o.unref(r),config:s},null,8,["base-x","base-y","config"]))}}),td={class:"v-ng-layer-nodes-selections"},nd=o.defineComponent({__name:"VFocusringLayer",setup(e){const{nodeStates:t}=ce(),{selectedNodes:n}=Yc(),r=bn();return(i,s)=>(o.openBlock(),o.createElementBlock("g",td,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(n),a=>(o.openBlock(),o.createBlock(ed,{id:a,key:a,state:o.unref(t)[a],pos:o.unref(r).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),od=["transform"],dr=o.defineComponent({__name:"VNode",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=o.computed(()=>{var f;return((f=t.pos)==null?void 0:f.x)||0}),r=o.computed(()=>{var f;return((f=t.pos)==null?void 0:f.y)||0}),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:d,handleNodeContextMenu:u}=Je();return(f,h)=>(o.openBlock(),o.createElementBlock("g",{class:o.normalizeClass({"v-ng-node":!0,hover:e.state.hovered,selected:e.state.selected}),transform:`translate(${o.unref(n)} ${o.unref(r)})`,onPointerdown:h[0]||(h[0]=o.withModifiers(g=>o.unref(s)(e.id,g),["stop"])),onPointerenterPassive:h[1]||(h[1]=g=>o.unref(a)(e.id,g)),onPointerleavePassive:h[2]||(h[2]=g=>o.unref(l)(e.id,g)),onClick:h[3]||(h[3]=o.withModifiers(g=>o.unref(c)(e.id,g),["stop"])),onDblclick:h[4]||(h[4]=o.withModifiers(g=>o.unref(d)(e.id,g),["stop"])),onContextmenu:h[5]||(h[5]=g=>o.unref(u)(e.id,g))},[o.renderSlot(f.$slots,"override-node",{nodeId:e.id,scale:o.unref(i),config:e.state.shape,class:o.normalizeClass({draggable:e.state.draggable,selectable:e.state.selectable})},()=>[o.createVNode(tt,{config:e.state.shape,class:o.normalizeClass({"v-ng-node-default":!0,draggable:e.state.draggable,selectable:e.state.selectable})},null,8,["config","class"])])],42,od))}}),rd=o.defineComponent({__name:"VNodesLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node"in t),{nodeZOrderedList:r}=ce(),i=bt(),s=bn();return(a,l)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(dr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},{"override-node":o.withCtx(d=>[o.renderSlot(a.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(d)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(r),c=>(o.openBlock(),o.createBlock(dr,{id:c.id,key:c.id,state:c,pos:o.unref(s).nodes[c.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),fr={[$.NORTH]:0,[$.NORTH_EAST]:1,[$.EAST]:2,[$.SOUTH_EAST]:3,[$.SOUTH]:4,[$.SOUTH_WEST]:5,[$.WEST]:6,[$.NORTH_WEST]:7,[$.CENTER]:-1},id=[(e,t)=>Se(e,0,t?90:60),(e,t)=>Se(e,45,t?90:45),(e,t)=>Se(e,90,t?60:30),(e,t)=>Se(e,135,t?90:45),(e,t)=>Se(e,180,t?90:60),(e,t)=>Se(e,225,t?90:45),(e,t)=>Se(e,270,t?60:30),(e,t)=>Se(e,315,t?90:45)];function sd(e,t,n,r,i){if(i===$.CENTER)return $.CENTER;const s=[];Object.entries(n).forEach(([d,u])=>{let f=!1;if(u.nodeId===e){const g=r(d);g&&(f=!0,u=rt(Y({},u),{pos:{x:g.x,y:g.y}}))}const h=(tn(qt(u.pos,t))+360+90)%360;s.push([h,f])});const a=ad(i),c=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(d=>s.every(u=>!id[d](...u)));return c===void 0?i:ld(c,i)}function Se(e,t,n){e%=360;const r=(t-n+360)%360,i=(t+n)%360;return r<=i?r<e&&e<i:r<e||e<i}function ad(e){var t;return(t=fr[e])!=null?t:0}function ld(e,t){var n,r;return(r=(n=Object.entries(fr)[e])==null?void 0:n[0])!=null?r:t}const cd=["transform"],hr=o.defineComponent({__name:"VNodeLabel",props:{id:null,state:null,pos:{default:void 0}},setup(e){const t=e,n=bt(),{edgeStates:r}=ce(),{scale:i}=re(),{handleNodePointerDownEvent:s,handleNodePointerOverEvent:a,handleNodePointerOutEvent:l,handleNodeClickEvent:c,handleNodeDoubleClickEvent:d,handleNodeContextMenu:u}=Je(),f=o.computed(()=>{var C;return((C=t.pos)==null?void 0:C.x)||0}),h=o.computed(()=>{var C;return((C=t.pos)==null?void 0:C.y)||0}),g=o.computed(()=>t.state.label.direction===$.CENTER?0:t.state.label.margin*i.value),E=o.ref(0),k=o.ref(0),w=o.ref(0),m=o.ref(0),v=o.computed(()=>{var N;const C=t.state.label.direction,T=t.state.label.directionAutoAdjustment;if(T===!1)return C;const z={x:f.value,y:h.value};return T===!0?sd(t.state.id,z,t.state.oppositeNodes,W=>{var _,V;return(V=(_=r[W])==null?void 0:_.loop)==null?void 0:V.center},C):(N=T({nodeId:t.state.id,pos:z,oppositeNodes:t.state.oppositeNodes}))!=null?N:C}),x=o.computed(()=>{switch(v.value){case $.CENTER:case $.NORTH:case $.SOUTH:return"middle";case $.EAST:case $.NORTH_EAST:case $.SOUTH_EAST:return"start";case $.WEST:case $.NORTH_WEST:case $.SOUTH_WEST:default:return"end"}}),y=o.computed(()=>{switch(v.value){case $.NORTH:case $.NORTH_EAST:case $.NORTH_WEST:return"text-top";case $.SOUTH:case $.SOUTH_EAST:case $.SOUTH_WEST:return"hanging";case $.CENTER:case $.EAST:case $.WEST:default:return"central"}}),p=o.computed(()=>{switch(v.value){case $.CENTER:case $.NORTH:case $.SOUTH:return 0;case $.EAST:return k.value;case $.WEST:return-k.value;case $.NORTH_EAST:case $.SOUTH_EAST:return m.value;case $.NORTH_WEST:case $.SOUTH_WEST:default:return-m.value}}),b=o.computed(()=>{switch(v.value){case $.NORTH:return-E.value;case $.SOUTH:return E.value;case $.CENTER:case $.EAST:case $.WEST:return 0;case $.NORTH_EAST:case $.NORTH_WEST:return-w.value;case $.SOUTH_EAST:case $.SOUTH_WEST:default:return w.value}});o.watchEffect(()=>{const C=i.value,T=t.state.shape;if(T.type=="circle"){const z=T.radius*C,N=z+g.value,W=Math.sqrt(J(N,2)/2);E.value=z+g.value,k.value=z+g.value,w.value=W,m.value=W}else{const z=T.borderRadius*C,N=T.width*C,W=T.height*C,_=z+g.value,V=Math.sqrt(J(_,2)/2);E.value=W/2+g.value,k.value=N/2+g.value,w.value=W/2-z+V,m.value=N/2-z+V}});const S=o.computed(()=>C=>n.label.handleNodeEvents?{pointerdown:T=>{T.stopPropagation(),s(C,T)},pointerenter:T=>a(C,T),pointerleave:T=>l(C,T),click:T=>{T.stopPropagation(),c(C,T)},dblclick:T=>{T.stopPropagation(),d(C,T)},contextmenu:T=>{u(C,T)}}:{}),M=o.computed(()=>{const C=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:C&&t.state.hovered,selected:C&&t.state.selected}}),O=o.computed(()=>{const C=n.label.handleNodeEvents;return{draggable:C&&t.state.draggable,selectable:C&&t.state.selectable}});return(C,T)=>(o.openBlock(),o.createElementBlock("g",o.mergeProps({class:o.unref(M),transform:`translate(${o.unref(f)} ${o.unref(h)})`},o.toHandlers(o.unref(S)(e.id),!0)),[o.renderSlot(C.$slots,"override-node-label",{nodeId:e.id,scale:o.unref(i),text:e.state.labelText,x:o.unref(p),y:o.unref(b),config:e.state.label,shape:e.state.shape,textAnchor:o.unref(x),dominantBaseline:o.unref(y),class:o.normalizeClass(o.unref(O))},()=>[o.createVNode(nt,{text:e.state.labelText,x:0,y:0,config:e.state.label,"text-anchor":o.unref(x),"dominant-baseline":o.unref(y),class:o.normalizeClass(o.unref(O)),transform:`translate(${o.unref(p)} ${o.unref(b)})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,cd))}}),ud=o.defineComponent({__name:"VNodeLabelsLayer",setup(e){const t=o.useSlots(),n=o.computed(()=>"override-node-label"in t),{nodeZOrderedList:r}=ce(),i=bt(),s=bn(),a=o.computed(()=>l(r.value));function l(c){return c.filter(d=>{var u;return d.label.visible&&((u=d.labelText)!=null?u:!1)})}return(c,d)=>o.unref(n)?(o.openBlock(),o.createBlock(o.TransitionGroup,{key:0,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),u=>(o.openBlock(),o.createBlock(hr,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},{"override-node-label":o.withCtx(f=>[o.renderSlot(c.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(f)))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(o.openBlock(),o.createBlock(o.TransitionGroup,{key:1,name:o.unref(i).transition,css:!!o.unref(i).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(a),u=>(o.openBlock(),o.createBlock(hr,{id:u.id,key:u.id,state:u,pos:o.unref(s).nodes[u.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),dd=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],fd=o.defineComponent({__name:"VPath",props:{path:null},setup(e){const t=e,{nodeStates:n,edgeStates:r,layouts:i}=ce(),{scale:s}=re(),a=xo();function l(h){if(h.edges.length===0)return[];const g=B.value(a.margin,h.path)*s.value;return Wl(h,n,i.nodes,r,s.value,a.curveInNode,a.end,g)}function c(h){const g=l(h);let E=!0;return g.map(k=>{if(k===null)E=!0;else{if(typeof k=="string")return k;if(k instanceof Array){k=[...k];const w=[];if(k.length%2===1){const m=k[0];k=k.slice(1),w.push(`L ${m.x} ${m.y}`)}return Dt(k,2).map(([m,v])=>w.push(`Q ${m.x} ${m.y} ${v.x} ${v.y}`)),w.join(" ")}else{const w=E;return E=!1,`${w?"M ":"L "}${k.x} ${k.y}`}}}).join(" ")}const d=o.computed(()=>{const h=t.path;return h.selected?B.values(a.selected,h.path):h.hovered&&a.hover?B.values(a.hover,h.path):B.values(a.normal,h.path)}),u=o.computed(()=>qe(d.value.dasharray,s.value)),f=o.computed(()=>{const h=d.value.animate?gt(d.value.dasharray)*d.value.animationSpeed*s.value:!1;return h?{"--animation-speed":h}:void 0});return(h,g)=>(o.openBlock(),o.createElementBlock("path",{class:o.normalizeClass({"v-ng-path":!0,animate:o.unref(d).animate,clickable:e.path.clickable,hoverable:e.path.hoverable}),d:c(e.path),fill:"none",stroke:o.unref(d).color,"stroke-width":o.unref(d).width*o.unref(s),"stroke-dasharray":o.unref(u),"stroke-linecap":o.unref(d).linecap,"stroke-linejoin":o.unref(d).linejoin,style:o.normalizeStyle(o.unref(f))},null,14,dd))}}),hd=o.defineComponent({__name:"VPaths",setup(e){const{pathZOrderedList:t}=ce(),n=xo(),{handlePathPointerDownEvent:r,handlePathPointerOverEvent:i,handlePathPointerOutEvent:s,handlePathClickEvent:a,handlePathDoubleClickEvent:l,handlePathContextMenu:c}=Je();return(d,u)=>(o.openBlock(),o.createBlock(o.TransitionGroup,{name:o.unref(n).transition,css:!!o.unref(n).transition,tag:"g",class:"v-ng-paths v-ng-layer-paths v-ng-graph-objects"},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(t),f=>(o.openBlock(),o.createBlock(fd,{key:f.id,path:f,onPointerdown:h=>o.unref(r)(f.id,h),onPointerenterPassive:h=>o.unref(i)(f.id,h),onPointerleavePassive:h=>o.unref(s)(f.id,h),onClick:o.withModifiers(h=>o.unref(a)(f.id,h),["stop"]),onDblclick:o.withModifiers(h=>o.unref(l)(f.id,h),["stop"]),onContextmenu:h=>o.unref(c)(f.id,h)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),pd=o.defineComponent({__name:"VPathsLayer",setup(e){return(t,n)=>(o.openBlock(),o.createBlock(hd))}}),gd={key:0},pr=o.defineComponent({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(e,{expose:t,emit:n}){const r=e,i=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],s=o.useSlots(),a=o.toRef(r,"nodes"),l=o.toRef(r,"edges"),{objects:c,isInCompatibilityModeForPath:d}=Xc(o.toRef(r,"paths")),u=Tc();Object.entries(r.eventHandlers).forEach(([P,A])=>{u.on(P,A)});const f=Sl(o.toRef(r,"configs")),h=o.computed(()=>{const P=new Set(Object.keys(s));i.forEach(I=>P.delete(I));const A=Object.fromEntries(q.map(I=>[I,[]]));return Object.assign(A,Object.entries(r.layers).reduce((I,[D,G])=>(P.delete(D),G in I?I[G].push(D):I[G]=[D],I),{})),A.root.push(...P),A}),g=o.computed(()=>f.view.grid.visible),E=o.computed(()=>{const P=h.value;return g.value||P.background.length>0||P.grid.length>0}),k=tu(f,s),w=o.ref(),m=o.ref(),v=o.ref(),x=o.ref(0),y=o.computed(()=>x.value!==0),p=qc(r,"zoomLevel",n,P=>(P=Math.max(P,f.view.minZoomLevel),P=Math.min(P,f.view.maxZoomLevel),P)),{svgPanZoom:b,onSvgPanZoomMounted:S,onSvgPanZoomUnmounted:M}=Fc(m,{viewportSelector:".v-ng-viewport",minZoom:f.view.minZoomLevel,maxZoom:f.view.maxZoomLevel,dblClickZoomEnabled:Er(f.view),mouseWheelZoomEnabled:wn(f.view),fit:f.view.autoPanAndZoomOnLoad==="fit-content",center:f.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:f.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:P=>{var I,D;if(x.value===2)return;const A=(D=(I=b.value)==null?void 0:I.getRealZoom())!=null?D:1;Math.abs(p.value-A)>=1e-6&&(p.value=A,u.emit("view:zoom",A))},panEnabled:f.view.panEnabled,onPan:P=>{x.value!==2&&u.emit("view:pan",P)}});Bt({container:w,svg:m,viewport:v,svgPanZoom:b});const O={width:0,height:0},C=globalThis.ResizeObserver?new ResizeObserver(()=>{var A,I,D;if((A=b.value)==null||A.resize(),!f.view.autoPanOnResize)return;const P=(I=w.value)==null?void 0:I.getBoundingClientRect();if(P){const G=-(O.width-P.width)/2,Le=-(O.height-P.height)/2;(D=b.value)==null||D.panBy({x:G,y:Le});const{width:be,height:En}=P;(O.width!==be||O.height!==En)&&(Object.assign(O,{width:be,height:En}),u.emit("view:resize",{x:P.x,y:P.y,width:be,height:En}))}}):void 0;S(()=>{var G,Le,be;const P=Z(w.value,"svg-pan-zoom container");C==null||C.observe(P),(Le=(G=f.view).onSvgPanZoomInitialized)==null||Le.call(G,Z(b.value,"svg-pan-zoom instance"));const A=P.getBoundingClientRect(),{width:I,height:D}=A;Object.assign(O,{width:I,height:D}),(be=v.value)==null||be.addEventListener("touchstart",kr,{passive:!1})}),M(()=>{var P;C==null||C.disconnect(),(P=v.value)==null||P.removeEventListener("touchstart",kr)});const T=P=>{var A;(A=b.value)==null||A.applyAbsoluteZoomLevel(P,f.view.minZoomLevel,f.view.maxZoomLevel)};o.watch(()=>f.view.panEnabled,P=>{var A;(A=b.value)==null||A.setPanEnabled(P)}),o.watch(()=>[f.view.zoomEnabled,Er(f.view),wn(f.view)],()=>{const P=b.value;P&&Hd(P,f.view.zoomEnabled,f.view.doubleClickZoomEnabled,f.view.mouseWheelZoomEnabled)}),o.watch(p,P=>T(P)),o.watch(()=>[f.view.minZoomLevel,f.view.maxZoomLevel],P=>{T(p.value)});const{scale:z}=Wc(p,f.view);S(()=>{const P=r.zoomLevel;T(P)});const N=()=>ue(this,null,function*(){var P;Object.keys(r.nodes).length>0&&((P=b.value)==null||P.updateBBox(),yield rr())}),W=P=>ue(this,null,function*(){var Le,be;const A=!P||P.margin===void 0?f.view.fitContentMargin:P.margin;yield N();const I=Z(m.value).getBoundingClientRect(),D=lu(A,I),G=cu(Z(v.value),I,ie.nodes,p.value,D,f.view.scalingObjects);G?(T(G.zoom),(Le=b.value)==null||Le.pan(G.pos)):(be=b.value)==null||be.center(),u.emit("view:fit",void 0)}),_=()=>ue(this,null,function*(){var P;yield N(),(P=b.value)==null||P.center()}),V=()=>{var P,A;return(A=(P=b.value)==null?void 0:P.getViewBox())!=null?A:{top:0,bottom:0,left:0,right:0}},le=P=>{var A;return(A=b.value)==null?void 0:A.setViewBox(P)},K=mn(r,"selectedNodes",a,n);o.watch(K,P=>u.emit("node:select",Array.from(P)));const pe=mn(r,"selectedEdges",l,n);o.watch(pe,P=>u.emit("edge:select",Array.from(P)));const Ae=mn(r,"selectedPaths",c,n);o.watch(Ae,P=>u.emit("path:select",Array.from(P))),Kc(K,pe,Ae);const ot=de(new Set),ne=de(new Set),Re=de(new Set),ie=de({nodes:{}});Qc(ie),o.watch(()=>r.layouts,()=>{var P;return Object.assign(ie.nodes,(P=r.layouts.nodes)!=null?P:{})},{deep:!0,immediate:!0}),o.watch(ie,()=>n("update:layouts",ie),{deep:!0});const yn=Yl(),vn=o.ref(!1);u.on("node:dragstart",P=>vn.value=!0),u.on("node:dragend",P=>vn.value=!1),u.on("view:mode",P=>{var A,I,D,G;f.view.panEnabled&&(P==="default"?(A=b.value)==null||A.enablePan():(I=b.value)==null||I.disablePan()),f.view.zoomEnabled&&(P==="default"?(D=b.value)==null||D.enableZoom():(G=b.value)==null||G.disableZoom())});const xd=o.computed(()=>f.view.panEnabled||f.view.zoomEnabled||f.node.draggable),{nodeStates:Pd,edgeStates:Sd,pathStates:Md}=nc(cn(a,K,ot),cn(l,pe,ne),cn(c,Ae,Re),o.readonly(f),ie,r.layouts,yn,z),Cd=o.computed(()=>wn(f.view)),{isBoxSelectionMode:Td,selectionBox:br,startBoxSelection:Od,stopBoxSelection:Bd}=Mc(m,o.readonly(ie),o.readonly(p),Pd,Sd,Md,K,pe,Ae,ot,ne,Re,d,Cd,f,u),yr=()=>({layouts:de(ie.nodes),nodePositions:o.toRef(ie,"nodes"),nodes:a,edges:l,configs:o.readonly(f),scale:o.readonly(z),emitter:u,svgPanZoom:Z(b.value)});o.watch(()=>f.view.layoutHandler,(P,A)=>{A.deactivate(),P.activate(yr())});const{transitionWhile:zd,transitionOption:vr}=Gc(),Id=o.computed(()=>{const P=vr.value;return P.enabled?{"--transition-duration":P.duration+"ms","--transition-function":P.timingFunction}:{}});S(()=>ue(this,null,function*(){if(f.view.onBeforeInitialDisplay){const I=f.view.onBeforeInitialDisplay();Ol(I)&&(yield I)}const P=Z(b.value,"svg-pan-zoom");f.view.layoutHandler.activate(yr()),yield rr();const A=f.view.autoPanAndZoomOnLoad;if(f.view.fit||A!==!1){const I=Object.keys(r.nodes).length==0,D=P.getPan();if(I||A==="center-zero"){yield N();const G=P.getSizes();P.pan({x:G.width/2,y:G.height/2})}else A==="fit-content"||f.view.fit?yield W():A==="center-content"?yield _():yield N();o.nextTick(()=>{const G=P.getPan();D.x===G.x&&D.y===G.y&&u.emit("view:pan",G)})}else yield N();u.emit("view:load"),x.value=1})),M(()=>{x.value=2,u.emit("view:unload"),f.view.layoutHandler.deactivate()});function $d(){var P;(P=b.value)==null||P.zoomIn()}function Ad(){var P;(P=b.value)==null||P.zoomOut()}function Ld(P){var A;(A=b.value)==null||A.pan(P)}function _d(P){var A;(A=b.value)==null||A.panBy(P)}function Nd(){return Z(b.value).getPan()}function jd(){const P=Z(b.value).getSizes();return{width:P.width,height:P.height,viewBox:P.viewBox}}function Dd(P){return hn(Z(m.value,"svg"),Z(v.value,"viewport"),P)}function Zd(P){return vc(Z(m.value,"svg"),Z(v.value,"viewport"),P)}function Rd(){return Go(Z(m.value,"svg"),Z(v.value,"viewport"),z.value).outerHTML}function Vd(){return ue(this,arguments,function*(P={}){return(yield wr(P)).outerHTML})}function wr(){return ue(this,arguments,function*(P={}){return Ec(Z(m.value,"svg"),Z(v.value,"viewport"),z.value,P)})}t({fitToContents:W,panToCenter:_,getViewBox:V,setViewBox:le,transitionWhile:zd,startBoxSelection:Od,stopBoxSelection:Bd,zoomIn:$d,zoomOut:Ad,panTo:Ld,panBy:_d,getPan:Nd,getSizes:jd,translateFromDomToSvgCoordinates:Dd,translateFromSvgToDomCoordinates:Zd,getAsSvg:Rd,exportAsSvgText:Vd,exportAsSvgElement:wr});function Hd(P,A,I,D){P.setZoomEnabled(A),A&&I?P.enableDblClickZoom():P.disableDblClickZoom(),A&&D?P.enableMouseWheelZoom():P.disableMouseWheelZoom()}function Er(P){return P.zoomEnabled&&P.doubleClickZoomEnabled}function wn(P){return P.zoomEnabled&&P.mouseWheelZoomEnabled}function kr(P){P.stopPropagation()}return(P,A)=>(o.openBlock(),o.createElementBlock("div",{ref_key:"container",ref:w,class:"v-network-graph v-ng-container"},[(o.openBlock(),o.createElementBlock("svg",{ref_key:"svg",ref:m,class:o.normalizeClass(["v-ng-canvas",{show:o.unref(y),dragging:vn.value,touches:o.unref(xd),"box-selection-mode":o.unref(Td)}]),width:"100%",height:"100%"},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).root,I=>o.renderSlot(P.$slots,I,{key:I,scale:o.unref(z)})),128)),Object.keys(o.unref(yn).markers).length>0?(o.openBlock(),o.createElementBlock("defs",gd,[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(yn).markers,(I,D)=>(o.openBlock(),o.createBlock(ku,{id:D,key:D,marker:I,scale:o.unref(z)},null,8,["id","marker","scale"]))),128))])):o.createCommentVNode("",!0),o.unref(E)?(o.openBlock(),o.createBlock(Ou,{key:1},{default:o.withCtx(()=>[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).background,I=>(o.openBlock(),o.createElementBlock("g",{key:I,class:"v-ng-layer"},[o.renderSlot(P.$slots,I,{scale:o.unref(z)})]))),128)),o.unref(g)?(o.openBlock(),o.createBlock(Tu,{key:0})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).grid,I=>(o.openBlock(),o.createElementBlock("g",{key:I,class:"v-ng-layer"},[o.renderSlot(P.$slots,I,{scale:o.unref(z)})]))),128))]),_:3})):o.createCommentVNode("",!0),o.createElementVNode("g",{ref_key:"viewport",ref:v,class:o.normalizeClass(["v-ng-viewport",{"v-ng-transition":o.unref(vr).enabled}]),style:o.normalizeStyle(o.unref(Id))},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h).base,I=>(o.openBlock(),o.createElementBlock("g",{key:I,class:"v-ng-layer"},[o.renderSlot(P.$slots,I,{scale:o.unref(z)})]))),128)),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(k),I=>(o.openBlock(),o.createElementBlock(o.Fragment,{key:I},[I==="edges"?(o.openBlock(),o.createBlock(Xu,{key:0},o.createSlots({_:2},["edge-overlay"in o.unref(s)?{name:"edge-overlay",fn:o.withCtx(D=>[o.renderSlot(P.$slots,"edge-overlay",o.normalizeProps(o.guardReactiveProps(D)))]),key:"0"}:void 0]),1024)):I==="edge-labels"?(o.openBlock(),o.createBlock(Ju,{key:1,"enable-edge-label":"edge-label"in o.unref(s),"enable-edges-label":"edges-label"in o.unref(s)},{"edge-label":o.withCtx(D=>[o.renderSlot(P.$slots,"edge-label",o.normalizeProps(o.guardReactiveProps(D)))]),"edges-label":o.withCtx(D=>[o.renderSlot(P.$slots,"edges-label",o.normalizeProps(o.guardReactiveProps(D)))]),_:3},8,["enable-edge-label","enable-edges-label"])):I==="focusring"?(o.openBlock(),o.createBlock(nd,{key:2})):I==="nodes"?(o.openBlock(),o.createBlock(rd,{key:3},{"override-node":o.withCtx(D=>[o.renderSlot(P.$slots,"override-node",o.normalizeProps(o.guardReactiveProps(D)))]),_:3})):I==="node-labels"?(o.openBlock(),o.createBlock(ud,{key:4},{"override-node-label":o.withCtx(D=>[o.renderSlot(P.$slots,"override-node-label",o.normalizeProps(o.guardReactiveProps(D)))]),_:3})):I==="paths"?(o.openBlock(),o.createBlock(pd,{key:5})):o.createCommentVNode("",!0),(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(o.unref(h)[I],D=>(o.openBlock(),o.createElementBlock("g",{key:D,class:"v-ng-layer"},[o.renderSlot(P.$slots,D,{scale:o.unref(z)})]))),128))],64))),128))],6),o.unref(br)?(o.openBlock(),o.createBlock(pu,{key:2,box:o.unref(br),config:o.unref(f).view.selection.box},null,8,["box","config"])):o.createCommentVNode("",!0)],2))],512))}}),md=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},bd={};function yd(e,t){return o.openBlock(),o.createElementBlock("defs",null,[(o.openBlock(),o.createBlock(o.resolveDynamicComponent("style"),null,{default:o.withCtx(()=>[o.renderSlot(e.$slots,"default")]),_:3}))])}const gr=md(bd,[["render",yd]]),mr=o.defineComponent({__name:"VEdgeLabel",props:{area:null,config:null,text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(e){const t=e,n=o.ref(0),r=o.ref(0),i=o.ref("middle"),s=o.ref("central"),a=o.ref(0);o.watchEffect(()=>{const c=t.area.source,d=t.area.target;t.align==="source"?(c.above.x==d.above.x?i.value=c.above.y>d.above.y?"start":"end":i.value=c.above.x<d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=c.above.x,r.value=c.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=c.below.x,r.value=c.below.y,s.value="hanging"):(n.value=(c.above.x+c.below.x)/2,r.value=(c.above.y+c.below.y)/2,s.value="central")):t.align==="target"?(c.above.x==d.above.x?i.value=c.above.y<d.above.y?"start":"end":i.value=c.above.x>d.above.x?"start":"end",t.verticalAlign==="above"?(n.value=d.above.x,r.value=d.above.y,s.value="text-top"):t.verticalAlign==="below"?(n.value=d.below.x,r.value=d.below.y,s.value="hanging"):(n.value=(d.above.x+d.below.x)/2,r.value=(d.above.y+d.below.y)/2,s.value="central")):(i.value="middle",t.verticalAlign==="above"?(n.value=(c.above.x+d.above.x)/2,r.value=(c.above.y+d.above.y)/2,s.value="text-top"):t.verticalAlign==="below"?(n.value=(c.below.x+d.below.x)/2,r.value=(c.below.y+d.below.y)/2,s.value="hanging"):(n.value=(c.above.x+d.below.x)/2,r.value=(c.above.y+d.below.y)/2,s.value="central"));let u=F.fromPositions(c.above,d.above).v.angleDegree();(u<-90||u>=90)&&(u=u+180,u>180&&(u-=360)),a.value=u});const l=o.computed(()=>s.value==="central"&&!t.config.background?rt(Y({},t.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):t.config);return(c,d)=>(o.openBlock(),o.createBlock(nt,{class:"v-ng-edge-label",text:e.text,x:n.value,y:r.value,config:o.unref(l),"text-anchor":i.value,"dominant-baseline":s.value,transform:`rotate(${a.value} ${n.value} ${r.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),vd=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:mr,VLabelText:nt,VNetworkGraph:pr,VShape:tt,VStyle:gr},Symbol.toStringTag,{value:"Module"})),wd=10;class Ed extends Xt{constructor(t={}){super(),this.options=t}setNodePosition(t,n){const r=this.options.grid||wd;t.value.x=Math.floor(n.x/r)*r,t.value.y=Math.floor(n.y/r)*r}}const kd=function(e){Object.entries(vd).forEach(([t,n])=>{e.component(t,n)})};L.Config=B,L.GridLayout=Ed,L.LayerPositions=q,L.NodeLabelDirection=$,L.SimpleLayout=Xt,L.VEdgeLabel=mr,L.VLabelText=nt,L.VNetworkGraph=pr,L.VShape=tt,L.VStyle=gr,L.Vector2D=j,L.configsWithType=wl,L.defineConfigs=El,L.getFullConfigs=xl,L.install=kd,L.useStates=ce,L.withSelf=pt,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.js.map
